{"version":3,"sources":["webpack://gifts/./node_modules/core-js/internals/string-trim-forced.js","webpack://gifts/./node_modules/core-js/internals/string-trim.js","webpack://gifts/./node_modules/core-js/internals/whitespaces.js","webpack://gifts/./node_modules/core-js/modules/es.string.trim-start.js","webpack://gifts/./src/client.js","webpack://gifts/./node_modules/@rexxars/eventsource-polyfill/src/eventsource.js","webpack://gifts/./node_modules/@sanity/client/lib/assets/assetsClient.js","webpack://gifts/./node_modules/@sanity/client/lib/auth/authClient.js","webpack://gifts/./node_modules/@sanity/client/lib/config.js","webpack://gifts/./node_modules/@sanity/client/lib/data/dataMethods.js","webpack://gifts/./node_modules/@sanity/client/lib/data/encodeQueryString.js","webpack://gifts/./node_modules/@sanity/client/lib/data/listen.js","webpack://gifts/./node_modules/@sanity/client/lib/data/patch.js","webpack://gifts/./node_modules/@sanity/client/lib/data/transaction.js","webpack://gifts/./node_modules/@sanity/client/lib/datasets/datasetsClient.js","webpack://gifts/./node_modules/@sanity/client/lib/http/browserMiddleware.js","webpack://gifts/./node_modules/@sanity/client/lib/http/errors.js","webpack://gifts/./node_modules/@sanity/client/lib/http/queryString.js","webpack://gifts/./node_modules/@sanity/client/lib/http/request.js","webpack://gifts/./node_modules/@sanity/client/lib/http/requestOptions.js","webpack://gifts/./node_modules/@sanity/client/lib/projects/projectsClient.js","webpack://gifts/./node_modules/@sanity/client/lib/sanityClient.js","webpack://gifts/./node_modules/@sanity/client/lib/users/usersClient.js","webpack://gifts/./node_modules/@sanity/client/lib/util/defaults.js","webpack://gifts/./node_modules/@sanity/client/lib/util/getSelection.js","webpack://gifts/./node_modules/@sanity/client/lib/util/once.js","webpack://gifts/./node_modules/@sanity/client/lib/util/pick.js","webpack://gifts/./node_modules/@sanity/client/lib/validators.js","webpack://gifts/./node_modules/@sanity/eventsource/browser.js","webpack://gifts/./node_modules/@sanity/generate-help-url/index.js","webpack://gifts/./node_modules/@sanity/image-url/lib/browser/image-url.umd.js","webpack://gifts/./node_modules/@sanity/observable/lib/SanityObservableMinimal.js","webpack://gifts/./node_modules/@sanity/observable/minimal.js","webpack://gifts/./node_modules/@sanity/observable/operators/filter.js","webpack://gifts/./node_modules/@sanity/observable/operators/map.js","webpack://gifts/./node_modules/@sanity/observable/operators/reduce.js","webpack://gifts/./node_modules/deep-assign/index.js","webpack://gifts/./node_modules/get-it/index.js","webpack://gifts/./node_modules/get-it/lib/index.js","webpack://gifts/./node_modules/get-it/lib/middleware/defaultOptionsProcessor.js","webpack://gifts/./node_modules/get-it/lib/middleware/defaultOptionsValidator.js","webpack://gifts/./node_modules/get-it/lib/middleware/jsonRequest.js","webpack://gifts/./node_modules/get-it/lib/middleware/jsonResponse.js","webpack://gifts/./node_modules/get-it/lib/middleware/observable.js","webpack://gifts/./node_modules/get-it/lib/middleware/progress/browser-progress.js","webpack://gifts/./node_modules/get-it/lib/middleware/progress/index.js","webpack://gifts/./node_modules/get-it/lib/request/browser-request.js","webpack://gifts/./node_modules/get-it/lib/request/index.js","webpack://gifts/./node_modules/get-it/lib/util/global.js","webpack://gifts/./node_modules/get-it/lib/util/middlewareReducer.js","webpack://gifts/./node_modules/is-obj/index.js","webpack://gifts/./node_modules/is-plain-object/index.js","webpack://gifts/./node_modules/isobject/index.js","webpack://gifts/./node_modules/make-error/index.js","webpack://gifts/./node_modules/nano-pubsub/index.js","webpack://gifts/./node_modules/parse-headers/parse-headers.js","webpack://gifts/./node_modules/querystringify/index.js","webpack://gifts/./node_modules/requires-port/index.js","webpack://gifts/./node_modules/rxjs/internal/Observable.js","webpack://gifts/./node_modules/rxjs/internal/Observer.js","webpack://gifts/./node_modules/rxjs/internal/Subscriber.js","webpack://gifts/./node_modules/rxjs/internal/Subscription.js","webpack://gifts/./node_modules/rxjs/internal/config.js","webpack://gifts/./node_modules/rxjs/internal/observable/empty.js","webpack://gifts/./node_modules/rxjs/internal/operators/defaultIfEmpty.js","webpack://gifts/./node_modules/rxjs/internal/operators/filter.js","webpack://gifts/./node_modules/rxjs/internal/operators/map.js","webpack://gifts/./node_modules/rxjs/internal/operators/reduce.js","webpack://gifts/./node_modules/rxjs/internal/operators/scan.js","webpack://gifts/./node_modules/rxjs/internal/operators/takeLast.js","webpack://gifts/./node_modules/rxjs/internal/symbol/observable.js","webpack://gifts/./node_modules/rxjs/internal/symbol/rxSubscriber.js","webpack://gifts/./node_modules/rxjs/internal/util/ArgumentOutOfRangeError.js","webpack://gifts/./node_modules/rxjs/internal/util/UnsubscriptionError.js","webpack://gifts/./node_modules/rxjs/internal/util/canReportError.js","webpack://gifts/./node_modules/rxjs/internal/util/hostReportError.js","webpack://gifts/./node_modules/rxjs/internal/util/identity.js","webpack://gifts/./node_modules/rxjs/internal/util/isArray.js","webpack://gifts/./node_modules/rxjs/internal/util/isFunction.js","webpack://gifts/./node_modules/rxjs/internal/util/isObject.js","webpack://gifts/./node_modules/rxjs/internal/util/pipe.js","webpack://gifts/./node_modules/rxjs/internal/util/toSubscriber.js","webpack://gifts/./node_modules/same-origin/index.js","webpack://gifts/./node_modules/same-origin/url-parser.js","webpack://gifts/./node_modules/url-parse/index.js"],"names":["fails","whitespaces","module","exports","METHOD_NAME","name","requireObjectCoercible","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","$","$trimStart","FORCED","forcedStringTrimMethod","trimStart","this","target","proto","forced","trimLeft","sanityClient","projectId","dataset","self","EventSource","url","options","SyntaxError","URL","setOptions","evs","setTimeout","poll","prototype","CONNECTING","OPEN","CLOSED","defaultOptions","loggingEnabled","loggingPrefix","interval","bufferSizeLimit","silentTimeout","getArgs","evs_buffer_size_limit","xhrHeaders","Accept","option","defaults","hasOwnProperty","console","log","message","readyState","cleanup","cursor","cache","_xhr","XHR","resetNoActivityTimer","err","dispatchEvent","type","data","pollAgain","_pollTimer","clearInterval","_noActivityTimer","abort","close","_onxhrdata","request","isReady","hasError","buffer","getBuffer","length","substring","lastMessageIndex","newcursor","toparse","parseStream","isDone","chunk","i","j","eventType","datas","line","retry","events","normalizeToLF","split","parts","trimWhiteSpace","indexOf","parseInt","isNaN","push","lastEventId","event","MessageEvent","join","window","location","origin","handlers","call","addEventListener","handler","removeEventListener","splice","_noactivityTimer","onerror","onmessage","onopen","urlWithParams","baseURL","params","encodedArgs","key","urlarg","urlize","encodeURIComponent","text","ln2","lastIndexOf","lr2","lrln2","Math","max","str","reTrim","isOldIE","isPolyfill","evs_preamble","XDomainRequest","_request","onprogress","_ready","onload","_loaded","_failed","ontimeout","reqGetArgs","defaultArgs","evs_last_event_id","open","send","useXDomainRequest","rv","responseText","XMLHttpRequest","onreadystatechange","status","headers","header","setRequestHeader","bubbles","cancelBubble","cancelable","Boolean","undefined","responseType","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","_s","_i","next","done","value","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","assign","map","filter","queryString","validators","AssetsClient","client","toDocument","body","document","defineProperty","enumerable","get","warn","optionsFromFile","opts","file","File","filename","preserveFilename","contentType","upload","assetType","arguments","validateAssetType","meta","extract","hasDataset","clientConfig","assetEndpoint","label","title","description","creditLine","source","query","sourceId","id","sourceName","sourceUrl","observable","_requestObservable","method","timeout","uri","concat","isPromiseAPI","pipe","toPromise","delete","docId","_id","getImageUrl","ref","_ref","Error","_id$split2","assetId","size","format","_this$client$clientCo","qs","AuthClient","getLoginProviders","logout","generateHelpUrl","validate","once","defaultConfig","apiHost","useProjectHostname","gradientMode","LOCALHOSTS","createWarningPrinter","printCdnWarning","printBrowserTokenWarning","printCdnTokenWarning","initConfig","config","prevConfig","newConfig","projectBased","Promise","helpUrl","namespace","isBrowser","hostname","isLocalhost","host","isLocal","token","ignoreBrowserTokenWarning","useCdn","isDefaultApi","withCredentials","cdnUrl","hostParts","protocol","cdnHost","_defineProperty","obj","configurable","writable","getSelection","encodeQueryString","Transaction","Patch","listen","excludeFalsey","param","defValue","getMutationQuery","returnIds","returnDocuments","visibility","isResponse","getBody","getDataUrl","operation","path","catalog","baseUri","fetch","mapResponse","filterResponse","res","result","_dataRequest","getDocument","json","documents","getDocuments","ids","docs","attr","indexed","doc","reduce","create","_create","createIfNotExists","requireDocumentId","createOrReplace","patch","selector","operations","selection","dataRequest","mutations","mutate","mut","serialize","muts","transactionId","transaction","endpoint","isMutation","strQuery","useGet","stringQuery","returnFirst","reqOptions","results","op","mutation","enc","_ref$params","_ref$options","base","qString","keys","JSON","stringify","Observable","polyfilledEventSource","pick","tokenWarning","printTokenWarning","isWindowEventSource","possibleOptions","includeResult","parseEvent","parse","cooerceError","evt","error","extractErrorMessage","listenOpts","_this$clientConfig","listenFor","shouldEmitReconnect","esOptions","Authorization","observer","reconnectTimer","es","getEventSource","stopped","onError","unsubscribe","clearTimeout","onChannelError","onMessage","onDisconnect","complete","forEach","deepAssign","validateObject","validateInsert","clone","merge","props","stack","_assign","set","diffMatchPatch","unset","attrs","setIfMissing","_set","inc","dec","insert","at","items","_this$_assign","append","prepend","deleteCount","startIndex","delCount","delRange","rangeSelector","ifRevisionId","rev","ifRevisionID","toJSON","commit","reset","defaultMutateOptions","trxId","_add","documentId","validateDocumentId","patchOps","isBuilder","DatasetsClient","bind","_modify","edit","list","makeError","ClientError","extractErrorProps","super","ServerError","response","statusCode","responseBody","stringifyBody","details","statusMessage","httpErrorMessage","toLowerCase","getIt","jsonRequest","jsonResponse","progress","_require","httpError","onResponse","implementation","httpRequest","requester","maxRedirects","defaultRequester","projectHeader","overrides","useGlobalApi","ProjectsClient","getById","dataMethods","UsersClient","getRequestOptions","_require3","SanityClient","assets","datasets","projects","users","auth","observableConfig","getUrl","canUseCdn","prop","sel","selectionOpts","fn","returnValue","didCall","apply","_typeof","VALID_ASSET_TYPES","VALID_INSERT_LOCATIONS","val","signature","valid","loc","slug","_extends","_createForOfIteratorHelperLoose","example","parseAssetId","_ref$split","dimensionString","_dimensionString$spli","width","height","isFinite","isRef","src","isAsset","isAssetStub","asset","parseSource","image","isUrl","urlToId","img","crop","hotspot","applyDefaults","left","top","bottom","right","x","y","SPEC_NAME_TO_URL_NAME_MAPPINGS","urlForImage","spec","cropLeft","round","cropTop","hotSpotVerticalRadius","hotSpotHorizontalRadius","hotSpotCenterX","hotSpotCenterY","rect","focalPoint","ignoreImageParams","fit","specToImageUrl","baseUrl","_spec$rect","bg","flip","flipHorizontal","flipVertical","mapping","specName","cropRect","imgWidth","imgHeight","desiredAspectRatio","_width","_height","_left","_top","floor","validFits","validCrops","validAutoModes","isSanityClient","rewriteSpecName","_step","_iterator","entry","urlBuilder","_client$clientConfig","apiUrl","ImageUrlBuilder","parent","_proto","withOptions","newOptions","_dataset","_projectId","_bg","dpr","_dpr","maxWidth","_maxWidth","minWidth","_minWidth","maxHeight","_maxHeight","minHeight","_minHeight","blur","_blur","sharpen","_sharpen","_format","invert","_invert","orientation","_orientation","quality","_quality","forceDownload","download","saturation","_saturation","auto","factory","SanityObservableMinimal","createDeprecatedMemberOp","hasWarned","lift","operator","isObj","propIsEnumerable","propertyIsEnumerable","toObject","assignKey","to","getOwnPropertySymbols","symbols","s","pubsub","middlewareReducer","processOptions","validateOptions","channelNames","middlehooks","createRequester","initMiddleware","loadedMiddleware","middleware","ware","channels","applyMiddleware","context","ongoingRequest","subscribe","ctx","reqErr","publish","use","newMiddleware","onReturn","objectAssign","urlParse","isReactNative","navigator","product","has","stringifyQueryString","pairs","item","normalizeTimeout","time","connect","socket","delay","Number","removeUndefined","toUpperCase","validUrl","isPlainObject","serializeTypes","isBuffer","tryParse","shouldDecode","force","global","onRequest","adapter","xhr","handleProgress","stage","percent","lengthComputable","loaded","total","sameOrigin","parseHeaders","win","XmlHttpRequest","callback","timers","cors","href","injectedResponse","cbTimer","isXdr","aborted","timedOut","onabort","delays","stopTimers","timeoutRequest","resetTimers","statusText","getAllResponseHeaders","reduceResponse","onLoad","rawBody","code","isNetworkError","g","hook","defaultValue","_len","args","_key","bailEarly","isObject","isObjectObject","ctor","prot","construct","Reflect","captureStackTrace","BaseError","cname","container","setFunctionName","f","_","super_","properties","subscribers","subscriber","idx","arg","headersArr","row","index","decode","input","decodeURIComponent","e","encode","prefix","part","parser","exec","port","canReportError_1","toSubscriber_1","observable_1","pipe_1","config_1","_isScalar","_subscribe","observerOrNext","sink","toSubscriber","add","useDeprecatedSynchronousErrorHandling","syncErrorThrowable","_trySubscribe","syncErrorThrown","syncErrorValue","canReportError","promiseCtor","_this","getPromiseCtor","resolve","reject","subscription","pipeFromArray","hostReportError_1","empty","closed","hostReportError","_extendStatics","__extends","d","b","setPrototypeOf","__proto__","p","__","isFunction_1","Observer_1","Subscription_1","rxSubscriber_1","Subscriber","_super","destinationOrNext","isStopped","destination","SafeSubscriber","rxSubscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentOrParents","Subscription","_parentSubscriber","isFunction","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","_unsubscribe","isArray_1","isObject_1","UnsubscriptionError_1","_subscriptions","_ctorUnsubscribe","errors","_a","remove","UnsubscriptionError","flattenUnsubscriptionErrors","sub","teardown","EMPTY","tmp","subscriptions","subscriptionIndex","errs","_enable_super_gross_mode_that_will_cause_bad_things","Observable_1","scheduler","schedule","emptyScheduled","Subscriber_1","defaultIfEmpty","DefaultIfEmptyOperator","DefaultIfEmptySubscriber","isEmpty","predicate","thisArg","FilterOperator","FilterSubscriber","count","project","MapOperator","MapSubscriber","scan_1","takeLast_1","defaultIfEmpty_1","accumulator","seed","scan","takeLast","acc","hasSeed","ScanOperator","ScanSubscriber","_seed","_tryNext","ArgumentOutOfRangeError_1","empty_1","TakeLastOperator","ArgumentOutOfRangeError","TakeLastSubscriber","ring","random","$$rxSubscriber","ArgumentOutOfRangeErrorImpl","UnsubscriptionErrorImpl","closed_1","identity","identity_1","fns","prev","nextOrObserver","uri1","uri2","ieMode","url1","url2","url1Port","url2Port","match","regex","required","slashes","protocolre","rules","address","NaN","ignore","hash","lolcation","finaldestination","Url","unescape","pathname","extractProtocol","rest","relative","extracted","instruction","instructions","charAt","last","unshift","up","username","password","pop","char","ins"],"mappings":"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","file":"commons-bca893f85e3d5ec68403.js","sourcesContent":["var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\n$({ target: 'String', proto: true, forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n","import sanityClient from '@sanity/client';\n\nexport default sanityClient({\n    projectId: 'n1gslz9a',\n    dataset: 'production'\n})","/*\n * EventSource polyfill\n * Originally published by sc AmvTek srl (https://github.com/amvtek/EventSource) - devel@amvtek.com\n * Forked by Espen Hovlandsdal to fix a few issues + publish latest version\n */\n;\n\n(function (root, factory) {\n  /* global define */\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    if (global.EventSource && !global._eventSourceImportPrefix) {\n      return;\n    }\n\n    var evsImportName = (root._eventSourceImportPrefix || '') + 'EventSource';\n    root[evsImportName] = factory();\n  }\n})(typeof self === 'undefined' ? this : self, function () {\n  var EventSource = function EventSource(url, options) {\n    if (!url || typeof url != 'string') {\n      throw new SyntaxError('Not enough arguments');\n    }\n\n    this.URL = url;\n    this.setOptions(options);\n    var evs = this;\n    setTimeout(function () {\n      evs.poll();\n    }, 0);\n  };\n\n  EventSource.prototype = {\n    CONNECTING: 0,\n    OPEN: 1,\n    CLOSED: 2,\n    defaultOptions: {\n      loggingEnabled: false,\n      loggingPrefix: 'eventsource',\n      interval: 500,\n      // milliseconds\n      bufferSizeLimit: 256 * 1024,\n      // bytes\n      silentTimeout: 300000,\n      // milliseconds\n      getArgs: {\n        evs_buffer_size_limit: 256 * 1024\n      },\n      xhrHeaders: {\n        Accept: 'text/event-stream',\n        'Cache-Control': 'no-cache',\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    },\n    setOptions: function setOptions(options) {\n      var defaults = this.defaultOptions;\n      var option; // set all default options...\n\n      for (option in defaults) {\n        if (defaults.hasOwnProperty(option)) {\n          this[option] = defaults[option];\n        }\n      } // override with what is in options\n\n\n      for (option in options) {\n        if (option in defaults && options.hasOwnProperty(option)) {\n          this[option] = options[option];\n        }\n      } // if getArgs option is enabled\n      // ensure evs_buffer_size_limit corresponds to bufferSizeLimit\n\n\n      if (this.getArgs && this.bufferSizeLimit) {\n        this.getArgs.evs_buffer_size_limit = this.bufferSizeLimit;\n      } // if console is not available, force loggingEnabled to false\n      // eslint-disable-next-line no-console\n\n\n      if (typeof console === 'undefined' || typeof console.log === 'undefined') {\n        this.loggingEnabled = false;\n      }\n    },\n    log: function log(message) {\n      if (this.loggingEnabled) {\n        // eslint-disable-next-line no-console\n        console.log('[' + this.loggingPrefix + ']:' + message);\n      }\n    },\n    poll: function poll() {\n      try {\n        if (this.readyState == this.CLOSED) {\n          return;\n        }\n\n        this.cleanup();\n        this.readyState = this.CONNECTING;\n        this.cursor = 0;\n        this.cache = '';\n        this._xhr = new this.XHR(this);\n        this.resetNoActivityTimer();\n      } catch (err) {\n        // in an attempt to silence the errors\n        this.log('There were errors inside the pool try-catch');\n        this.dispatchEvent('error', {\n          type: 'error',\n          data: err.message\n        });\n      }\n    },\n    pollAgain: function pollAgain(interval) {\n      // schedule poll to be called after interval milliseconds\n      var evs = this;\n      evs.readyState = evs.CONNECTING;\n      evs.dispatchEvent('error', {\n        type: 'error',\n        data: 'Reconnecting '\n      });\n      this._pollTimer = setTimeout(function () {\n        evs.poll();\n      }, interval || 0);\n    },\n    cleanup: function cleanup() {\n      this.log('evs cleaning up');\n\n      if (this._pollTimer) {\n        clearInterval(this._pollTimer);\n        this._pollTimer = null;\n      }\n\n      if (this._noActivityTimer) {\n        clearInterval(this._noActivityTimer);\n        this._noActivityTimer = null;\n      }\n\n      if (this._xhr) {\n        this._xhr.abort();\n\n        this._xhr = null;\n      }\n    },\n    resetNoActivityTimer: function resetNoActivityTimer() {\n      if (this.silentTimeout) {\n        if (this._noActivityTimer) {\n          clearInterval(this._noActivityTimer);\n        }\n\n        var evs = this;\n        this._noActivityTimer = setTimeout(function () {\n          evs.log('Timeout! silentTImeout:' + evs.silentTimeout);\n          evs.pollAgain();\n        }, this.silentTimeout);\n      }\n    },\n    close: function close() {\n      this.readyState = this.CLOSED;\n      this.log('Closing connection. readyState: ' + this.readyState);\n      this.cleanup();\n    },\n    _onxhrdata: function _onxhrdata() {\n      var request = this._xhr;\n\n      if (request.isReady() && !request.hasError()) {\n        // reset the timer, as we have activity\n        this.resetNoActivityTimer(); // move this EventSource to OPEN state...\n\n        if (this.readyState == this.CONNECTING) {\n          this.readyState = this.OPEN;\n          this.dispatchEvent('open', {\n            type: 'open'\n          });\n        }\n\n        var buffer = request.getBuffer();\n\n        if (buffer.length > this.bufferSizeLimit) {\n          this.log('buffer.length > this.bufferSizeLimit');\n          this.pollAgain();\n        }\n\n        if (this.cursor == 0 && buffer.length > 0) {\n          // skip byte order mark \\uFEFF character if it starts the stream\n          if (buffer.substring(0, 1) == \"\\uFEFF\") {\n            this.cursor = 1;\n          }\n        }\n\n        var lastMessageIndex = this.lastMessageIndex(buffer);\n\n        if (lastMessageIndex[0] >= this.cursor) {\n          var newcursor = lastMessageIndex[1];\n          var toparse = buffer.substring(this.cursor, newcursor);\n          this.parseStream(toparse);\n          this.cursor = newcursor;\n        } // if request is finished, reopen the connection\n\n\n        if (request.isDone()) {\n          this.log('request.isDone(). reopening the connection');\n          this.pollAgain(this.interval);\n        }\n      } else if (this.readyState !== this.CLOSED) {\n        this.log('this.readyState !== this.CLOSED');\n        this.pollAgain(this.interval); //MV: Unsure why an error was previously dispatched\n      }\n    },\n    parseStream: function parseStream(chunk) {\n      // normalize line separators (\\r\\n,\\r,\\n) to \\n\n      // remove white spaces that may precede \\n\n      chunk = this.cache + this.normalizeToLF(chunk);\n      var events = chunk.split('\\n\\n');\n      var i, j, eventType, datas, line, retry;\n\n      for (i = 0; i < events.length - 1; i++) {\n        eventType = 'message';\n        datas = [];\n        var parts = events[i].split('\\n');\n\n        for (j = 0; j < parts.length; j++) {\n          line = this.trimWhiteSpace(parts[j]);\n\n          if (line.indexOf('event') == 0) {\n            eventType = line.replace(/event:?\\s*/, '');\n          } else if (line.indexOf('retry') == 0) {\n            retry = parseInt(line.replace(/retry:?\\s*/, ''), 10);\n\n            if (!isNaN(retry)) {\n              this.interval = retry;\n            }\n          } else if (line.indexOf('data') == 0) {\n            datas.push(line.replace(/data:?\\s*/, ''));\n          } else if (line.indexOf('id:') == 0) {\n            this.lastEventId = line.replace(/id:?\\s*/, '');\n          } else if (line.indexOf('id') == 0) {\n            // this resets the id\n            this.lastEventId = null;\n          }\n        }\n\n        if (datas.length && this.readyState != this.CLOSED) {\n          // dispatch a new event\n          var event = new MessageEvent(eventType, datas.join('\\n'), typeof window !== 'undefined' && typeof window.location !== 'undefined' ? window.location.origin : null, this.lastEventId);\n          this.dispatchEvent(eventType, event);\n        }\n      }\n\n      this.cache = events[events.length - 1];\n    },\n    dispatchEvent: function dispatchEvent(type, event) {\n      var handlers = this['_' + type + 'Handlers'];\n\n      if (handlers) {\n        for (var i = 0; i < handlers.length; i++) {\n          handlers[i].call(this, event);\n        }\n      }\n\n      if (this['on' + type]) {\n        this['on' + type].call(this, event);\n      }\n    },\n    addEventListener: function addEventListener(type, handler) {\n      if (!this['_' + type + 'Handlers']) {\n        this['_' + type + 'Handlers'] = [];\n      }\n\n      this['_' + type + 'Handlers'].push(handler);\n    },\n    removeEventListener: function removeEventListener(type, handler) {\n      var handlers = this['_' + type + 'Handlers'];\n\n      if (!handlers) {\n        return;\n      }\n\n      for (var i = handlers.length - 1; i >= 0; --i) {\n        if (handlers[i] === handler) {\n          handlers.splice(i, 1);\n          break;\n        }\n      }\n    },\n    _pollTimer: null,\n    _noactivityTimer: null,\n    _xhr: null,\n    lastEventId: null,\n    cache: '',\n    cursor: 0,\n    onerror: null,\n    onmessage: null,\n    onopen: null,\n    readyState: 0,\n    // ===================================================================\n    // helpers functions\n    // those are attached to prototype to ease reuse and testing...\n    urlWithParams: function urlWithParams(baseURL, params) {\n      var encodedArgs = [];\n\n      if (params) {\n        var key, urlarg;\n        var urlize = encodeURIComponent;\n\n        for (key in params) {\n          if (params.hasOwnProperty(key)) {\n            urlarg = urlize(key) + '=' + urlize(params[key]);\n            encodedArgs.push(urlarg);\n          }\n        }\n      }\n\n      if (encodedArgs.length > 0) {\n        if (baseURL.indexOf('?') == -1) return baseURL + '?' + encodedArgs.join('&');\n        return baseURL + '&' + encodedArgs.join('&');\n      }\n\n      return baseURL;\n    },\n    lastMessageIndex: function lastMessageIndex(text) {\n      var ln2 = text.lastIndexOf('\\n\\n');\n      var lr2 = text.lastIndexOf('\\r\\r');\n      var lrln2 = text.lastIndexOf('\\r\\n\\r\\n');\n\n      if (lrln2 > Math.max(ln2, lr2)) {\n        return [lrln2, lrln2 + 4];\n      }\n\n      return [Math.max(ln2, lr2), Math.max(ln2, lr2) + 2];\n    },\n    trimWhiteSpace: function trimWhiteSpace(str) {\n      // to remove whitespaces left and right of string\n      var reTrim = /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g;\n      return str.replace(reTrim, '');\n    },\n    normalizeToLF: function normalizeToLF(str) {\n      // replace \\r and \\r\\n with \\n\n      return str.replace(/\\r\\n|\\r/g, '\\n');\n    }\n  };\n\n  if (isOldIE()) {\n    EventSource.isPolyfill = 'IE_8-9'; // patch EventSource defaultOptions\n\n    var defaults = EventSource.prototype.defaultOptions;\n    defaults.xhrHeaders = null; // no headers will be sent\n\n    defaults.getArgs.evs_preamble = 2048 + 8; // EventSource will send request using Internet Explorer XDomainRequest\n\n    EventSource.prototype.XHR = function (evs) {\n      /* global XDomainRequest */\n      var request = new XDomainRequest();\n      this._request = request; // set handlers\n\n      request.onprogress = function () {\n        request._ready = true;\n\n        evs._onxhrdata();\n      };\n\n      request.onload = function () {\n        this._loaded = true;\n\n        evs._onxhrdata();\n      };\n\n      request.onerror = function () {\n        this._failed = true;\n        evs.readyState = evs.CLOSED;\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest error'\n        });\n      };\n\n      request.ontimeout = function () {\n        this._failed = true;\n        evs.readyState = evs.CLOSED;\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest timed out'\n        });\n      }; // XDomainRequest does not allow setting custom headers\n      // If EventSource has enabled the use of GET arguments\n      // we add parameters to URL so that server can adapt the stream...\n\n\n      var reqGetArgs = {};\n\n      if (evs.getArgs) {\n        // copy evs.getArgs in reqGetArgs\n        var defaultArgs = evs.getArgs;\n\n        for (var key in defaultArgs) {\n          if (defaultArgs.hasOwnProperty(key)) {\n            reqGetArgs[key] = defaultArgs[key];\n          }\n        }\n\n        if (evs.lastEventId) {\n          reqGetArgs.evs_last_event_id = evs.lastEventId;\n        }\n      } // send the request\n\n\n      request.open('GET', evs.urlWithParams(evs.URL, reqGetArgs));\n      request.send();\n    };\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: true,\n      _request: null,\n      _ready: false,\n      // true when progress events are dispatched\n      _loaded: false,\n      // true when request has been loaded\n      _failed: false,\n      // true if when request is in error\n      isReady: function isReady() {\n        return this._request._ready;\n      },\n      isDone: function isDone() {\n        return this._request._loaded;\n      },\n      hasError: function hasError() {\n        return this._request._failed;\n      },\n      getBuffer: function getBuffer() {\n        var rv = '';\n\n        try {\n          rv = this._request.responseText || '';\n        } catch (err) {// intentional noop\n        }\n\n        return rv;\n      },\n      abort: function abort() {\n        if (this._request) {\n          this._request.abort();\n        }\n      }\n    };\n  } else {\n    EventSource.isPolyfill = 'XHR'; // EventSource will send request using XMLHttpRequest\n\n    EventSource.prototype.XHR = function (evs) {\n      var request = new XMLHttpRequest();\n      this._request = request;\n      evs._xhr = this; // set handlers\n\n      request.onreadystatechange = function () {\n        if (request.readyState > 1 && evs.readyState != evs.CLOSED) {\n          if (request.status == 200 || request.status >= 300 && request.status < 400) {\n            evs._onxhrdata();\n          } else {\n            request._failed = true;\n            evs.readyState = evs.CLOSED;\n            evs.dispatchEvent('error', {\n              type: 'error',\n              data: 'The server responded with ' + request.status\n            });\n            evs.close();\n          }\n        }\n      };\n\n      request.onprogress = function () {// intentional noop\n      };\n\n      request.open('GET', evs.urlWithParams(evs.URL, evs.getArgs), true);\n      var headers = evs.xhrHeaders; // maybe null\n\n      for (var header in headers) {\n        if (headers.hasOwnProperty(header)) {\n          request.setRequestHeader(header, headers[header]);\n        }\n      }\n\n      if (evs.lastEventId) {\n        request.setRequestHeader('Last-Event-Id', evs.lastEventId);\n      }\n\n      request.send();\n    };\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: false,\n      _request: null,\n      _failed: false,\n      // true if we have had errors...\n      isReady: function isReady() {\n        return this._request.readyState >= 2;\n      },\n      isDone: function isDone() {\n        return this._request.readyState == 4;\n      },\n      hasError: function hasError() {\n        return this._failed || this._request.status >= 400;\n      },\n      getBuffer: function getBuffer() {\n        var rv = '';\n\n        try {\n          rv = this._request.responseText || '';\n        } catch (err) {// intentional noop\n        }\n\n        return rv;\n      },\n      abort: function abort() {\n        if (this._request) {\n          this._request.abort();\n        }\n      }\n    };\n  }\n\n  function MessageEvent(type, data, origin, lastEventId) {\n    this.bubbles = false;\n    this.cancelBubble = false;\n    this.cancelable = false;\n    this.data = data || null;\n    this.origin = origin || '';\n    this.lastEventId = lastEventId || '';\n    this.type = type || 'message';\n  }\n\n  function isOldIE() {\n    //return true if we are in IE8 or IE9\n    return Boolean(typeof window !== 'undefined' && window.XDomainRequest && window.XMLHttpRequest && new XMLHttpRequest().responseType === undefined);\n  }\n\n  return EventSource;\n});","\"use strict\";\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/map'),\n    map = _require.map;\n\nvar _require2 = require('@sanity/observable/operators/filter'),\n    filter = _require2.filter;\n\nvar queryString = require('../http/queryString');\n\nvar validators = require('../validators');\n\nfunction AssetsClient(client) {\n  this.client = client;\n}\n\nfunction toDocument(body) {\n  // todo: rewrite to just return body.document in a while\n  var document = body.document;\n  Object.defineProperty(document, 'document', {\n    enumerable: false,\n    get: function get() {\n      // eslint-disable-next-line no-console\n      console.warn('The promise returned from client.asset.upload(...) now resolves with the asset document');\n      return document;\n    }\n  });\n  return document;\n}\n\nfunction optionsFromFile(opts, file) {\n  if (typeof window === 'undefined' || !(file instanceof window.File)) {\n    return opts;\n  }\n\n  return assign({\n    filename: opts.preserveFilename === false ? undefined : file.name,\n    contentType: file.type\n  }, opts);\n}\n\nassign(AssetsClient.prototype, {\n  /**\n   * Upload an asset\n   *\n   * @param  {String} assetType `image` or `file`\n   * @param  {File|Blob|Buffer|ReadableStream} body File to upload\n   * @param  {Object}  opts Options for the upload\n   * @param  {Boolean} opts.preserveFilename Whether or not to preserve the original filename (default: true)\n   * @param  {String}  opts.filename Filename for this file (optional)\n   * @param  {Number}  opts.timeout  Milliseconds to wait before timing the request out (default: 0)\n   * @param  {String}  opts.contentType Mime type of the file\n   * @param  {Array}   opts.extract Array of metadata parts to extract from image.\n   *                                 Possible values: `location`, `exif`, `image`, `palette`\n   * @param  {String}  opts.label Label\n   * @param  {String}  opts.title Title\n   * @param  {String}  opts.description Description\n   * @param  {String}  opts.creditLine The credit to person(s) and/or organization(s) required by the supplier of the image to be used when published\n   * @param  {Object}  opts.source Source data (when the asset is from an external service)\n   * @param  {String}  opts.source.id The (u)id of the asset within the source, i.e. 'i-f323r1E'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.name The name of the source, i.e. 'unsplash'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.url A url to where to find the asset, or get more info about it in the source\n   *                                  Optional\n   * @return {Promise} Resolves with the created asset document\n   */\n  upload: function upload(assetType, body) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    validators.validateAssetType(assetType); // If an empty array is given, explicitly set `none` to override API defaults\n\n    var meta = opts.extract || undefined;\n\n    if (meta && !meta.length) {\n      meta = ['none'];\n    }\n\n    var dataset = validators.hasDataset(this.client.clientConfig);\n    var assetEndpoint = assetType === 'image' ? 'images' : 'files';\n    var options = optionsFromFile(opts, body);\n    var label = options.label,\n        title = options.title,\n        description = options.description,\n        creditLine = options.creditLine,\n        filename = options.filename,\n        source = options.source;\n    var query = {\n      label: label,\n      title: title,\n      description: description,\n      filename: filename,\n      meta: meta,\n      creditLine: creditLine\n    };\n\n    if (source) {\n      query.sourceId = source.id;\n      query.sourceName = source.name;\n      query.sourceUrl = source.url;\n    }\n\n    var observable = this.client._requestObservable({\n      method: 'POST',\n      timeout: options.timeout || 0,\n      uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n      headers: options.contentType ? {\n        'Content-Type': options.contentType\n      } : {},\n      query: query,\n      body: body\n    });\n\n    return this.client.isPromiseAPI() ? observable.pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return toDocument(event.body);\n    })).toPromise() : observable;\n  },\n  delete: function _delete(type, id) {\n    // eslint-disable-next-line no-console\n    console.warn('client.assets.delete() is deprecated, please use client.delete(<document-id>)');\n    var docId = id || '';\n\n    if (!/^(image|file)-/.test(docId)) {\n      docId = \"\".concat(type, \"-\").concat(docId);\n    } else if (type._id) {\n      // We could be passing an entire asset document instead of an ID\n      docId = type._id;\n    }\n\n    validators.hasDataset(this.client.clientConfig);\n    return this.client.delete(docId);\n  },\n  getImageUrl: function getImageUrl(ref, query) {\n    var id = ref._ref || ref;\n\n    if (typeof id !== 'string') {\n      throw new Error('getImageUrl() needs either an object with a _ref, or a string with an asset document ID');\n    }\n\n    if (!/^image-[A-Za-z0-9_]+-\\d+x\\d+-[a-z]{1,5}$/.test(id)) {\n      throw new Error(\"Unsupported asset ID \\\"\".concat(id, \"\\\". URL generation only works for auto-generated IDs.\"));\n    }\n\n    var _id$split = id.split('-'),\n        _id$split2 = _slicedToArray(_id$split, 4),\n        assetId = _id$split2[1],\n        size = _id$split2[2],\n        format = _id$split2[3];\n\n    validators.hasDataset(this.client.clientConfig);\n    var _this$client$clientCo = this.client.clientConfig,\n        projectId = _this$client$clientCo.projectId,\n        dataset = _this$client$clientCo.dataset;\n    var qs = query ? queryString(query) : '';\n    return \"https://cdn.sanity.io/images/\".concat(projectId, \"/\").concat(dataset, \"/\").concat(assetId, \"-\").concat(size, \".\").concat(format).concat(qs);\n  }\n});\nmodule.exports = AssetsClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction AuthClient(client) {\n  this.client = client;\n}\n\nassign(AuthClient.prototype, {\n  getLoginProviders: function getLoginProviders() {\n    return this.client.request({\n      uri: '/auth/providers'\n    });\n  },\n  logout: function logout() {\n    return this.client.request({\n      uri: '/auth/logout',\n      method: 'POST'\n    });\n  }\n});\nmodule.exports = AuthClient;","\"use strict\";\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar assign = require('object-assign');\n\nvar validate = require('./validators');\n\nvar once = require('./util/once');\n\nvar defaultCdnHost = 'apicdn.sanity.io';\nvar defaultConfig = {\n  apiHost: 'https://api.sanity.io',\n  useProjectHostname: true,\n  gradientMode: false,\n  isPromiseAPI: true\n};\nvar LOCALHOSTS = ['localhost', '127.0.0.1', '0.0.0.0'];\n\nvar isLocal = function isLocal(host) {\n  return LOCALHOSTS.indexOf(host) !== -1;\n}; // eslint-disable-next-line no-console\n\n\nvar createWarningPrinter = function createWarningPrinter(message) {\n  return once(function () {\n    return console.warn(message.join(' '));\n  });\n};\n\nvar printCdnWarning = createWarningPrinter(['You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and', \"cheaper. Think about it! For more info, see \".concat(generateHelpUrl('js-client-cdn-configuration'), \".\"), 'To hide this warning, please set the `useCdn` option to either `true` or `false` when creating', 'the client.']);\nvar printBrowserTokenWarning = createWarningPrinter(['You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.', \"See \".concat(generateHelpUrl('js-client-browser-token'), \" for more information and how to hide this warning.\")]);\nvar printCdnTokenWarning = createWarningPrinter(['You have set `useCdn` to `true` while also specifying a token. This is usually not what you', 'want. The CDN cannot be used with an authorization token, since private data cannot be cached.', \"See \".concat(generateHelpUrl('js-client-usecdn-token'), \" for more information.\")]);\nexports.defaultConfig = defaultConfig;\n\nexports.initConfig = function (config, prevConfig) {\n  var newConfig = assign({}, defaultConfig, prevConfig, config);\n  var gradientMode = newConfig.gradientMode;\n  var projectBased = !gradientMode && newConfig.useProjectHostname;\n\n  if (typeof Promise === 'undefined') {\n    var helpUrl = generateHelpUrl('js-client-promise-polyfill');\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n\n  if (gradientMode && !newConfig.namespace) {\n    throw new Error('Configuration must contain `namespace` when running in gradient mode');\n  }\n\n  if (projectBased && !newConfig.projectId) {\n    throw new Error('Configuration must contain `projectId`');\n  }\n\n  var isBrowser = typeof window !== 'undefined' && window.location && window.location.hostname;\n  var isLocalhost = isBrowser && isLocal(window.location.hostname);\n\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    printBrowserTokenWarning();\n  } else if ((!isBrowser || isLocalhost) && newConfig.useCdn && newConfig.token) {\n    printCdnTokenWarning();\n  } else if (typeof newConfig.useCdn === 'undefined') {\n    printCdnWarning();\n  }\n\n  if (projectBased) {\n    validate.projectId(newConfig.projectId);\n  }\n\n  if (!gradientMode && newConfig.dataset) {\n    validate.dataset(newConfig.dataset, newConfig.gradientMode);\n  }\n\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = Boolean(newConfig.useCdn) && !newConfig.token && !newConfig.withCredentials;\n\n  if (newConfig.gradientMode) {\n    newConfig.url = newConfig.apiHost;\n    newConfig.cdnUrl = newConfig.apiHost;\n  } else {\n    var hostParts = newConfig.apiHost.split('://', 2);\n    var protocol = hostParts[0];\n    var host = hostParts[1];\n    var cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n\n    if (newConfig.useProjectHostname) {\n      newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v1\");\n      newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v1\");\n    } else {\n      newConfig.url = \"\".concat(newConfig.apiHost, \"/v1\");\n      newConfig.cdnUrl = newConfig.url;\n    }\n  }\n\n  return newConfig;\n};","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar validators = require('../validators');\n\nvar getSelection = require('../util/getSelection');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar Transaction = require('./transaction');\n\nvar Patch = require('./patch');\n\nvar listen = require('./listen');\n\nvar excludeFalsey = function excludeFalsey(param, defValue) {\n  var value = typeof param === 'undefined' ? defValue : param;\n  return param === false ? undefined : value;\n};\n\nvar getMutationQuery = function getMutationQuery() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || 'sync'\n  };\n};\n\nvar isResponse = function isResponse(event) {\n  return event.type === 'response';\n};\n\nvar getBody = function getBody(event) {\n  return event.body;\n};\n\nvar indexBy = function indexBy(docs, attr) {\n  return docs.reduce(function (indexed, doc) {\n    indexed[attr(doc)] = doc;\n    return indexed;\n  }, Object.create(null));\n};\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nvar getQuerySizeLimit = 11264;\nmodule.exports = {\n  listen: listen,\n  getDataUrl: function getDataUrl(operation, path) {\n    var config = this.clientConfig;\n    var catalog = config.gradientMode ? config.namespace : validators.hasDataset(config);\n    var baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    var uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return (this.clientConfig.gradientMode ? uri : \"/data\".concat(uri)).replace(/\\/($|\\?)/, '$1');\n  },\n  fetch: function fetch(query, params) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var mapResponse = options.filterResponse === false ? function (res) {\n      return res;\n    } : function (res) {\n      return res.result;\n    };\n\n    var observable = this._dataRequest('query', {\n      query: query,\n      params: params\n    }, options).pipe(map(mapResponse));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocument: function getDocument(id) {\n    var options = {\n      uri: this.getDataUrl('doc', id),\n      json: true\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      return event.body.documents && event.body.documents[0];\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocuments: function getDocuments(ids) {\n    var options = {\n      uri: this.getDataUrl('doc', ids.join(',')),\n      json: true\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      var indexed = indexBy(event.body.documents || [], function (doc) {\n        return doc._id;\n      });\n      return ids.map(function (id) {\n        return indexed[id] || null;\n      });\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  create: function create(doc, options) {\n    return this._create(doc, 'create', options);\n  },\n  createIfNotExists: function createIfNotExists(doc, options) {\n    validators.requireDocumentId('createIfNotExists', doc);\n    return this._create(doc, 'createIfNotExists', options);\n  },\n  createOrReplace: function createOrReplace(doc, options) {\n    validators.requireDocumentId('createOrReplace', doc);\n    return this._create(doc, 'createOrReplace', options);\n  },\n  patch: function patch(selector, operations) {\n    return new Patch(selector, operations, this);\n  },\n  delete: function _delete(selection, options) {\n    return this.dataRequest('mutate', {\n      mutations: [{\n        delete: getSelection(selection)\n      }]\n    }, options);\n  },\n  mutate: function mutate(mutations, options) {\n    var mut = mutations instanceof Patch || mutations instanceof Transaction ? mutations.serialize() : mutations;\n    var muts = Array.isArray(mut) ? mut : [mut];\n    var transactionId = options && options.transactionId;\n    return this.dataRequest('mutate', {\n      mutations: muts,\n      transactionId: transactionId\n    }, options);\n  },\n  transaction: function transaction(operations) {\n    return new Transaction(operations, this);\n  },\n  dataRequest: function dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var request = this._dataRequest(endpoint, body, options);\n\n    return this.isPromiseAPI() ? toPromise(request) : request;\n  },\n  _dataRequest: function _dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var isMutation = endpoint === 'mutate'; // Check if the query string is within a configured threshold,\n    // in which case we can use GET. Otherwise, use POST.\n\n    var strQuery = !isMutation && encodeQueryString(body);\n    var useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    var stringQuery = useGet ? strQuery : '';\n    var returnFirst = options.returnFirst;\n    var timeout = options.timeout,\n        token = options.token;\n    var uri = this.getDataUrl(endpoint, stringQuery);\n    var reqOptions = {\n      method: useGet ? 'GET' : 'POST',\n      uri: uri,\n      json: true,\n      body: useGet ? undefined : body,\n      query: isMutation && getMutationQuery(options),\n      timeout: timeout,\n      token: token\n    };\n    return this._requestObservable(reqOptions).pipe(filter(isResponse), map(getBody), map(function (res) {\n      if (!isMutation) {\n        return res;\n      } // Should we return documents?\n\n\n      var results = res.results || [];\n\n      if (options.returnDocuments) {\n        return returnFirst ? results[0] && results[0].document : results.map(function (mut) {\n          return mut.document;\n        });\n      } // Return a reduced subset\n\n\n      var key = returnFirst ? 'documentId' : 'documentIds';\n      var ids = returnFirst ? results[0] && results[0].id : results.map(function (mut) {\n        return mut.id;\n      });\n      return _defineProperty({\n        transactionId: res.transactionId,\n        results: results\n      }, key, ids);\n    }));\n  },\n  _create: function _create(doc, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var mutation = _defineProperty({}, op, doc);\n\n    var opts = assign({\n      returnFirst: true,\n      returnDocuments: true\n    }, options);\n    return this.dataRequest('mutate', {\n      mutations: [mutation]\n    }, opts);\n  }\n};","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nvar enc = encodeURIComponent;\n\nmodule.exports = function (_ref) {\n  var query = _ref.query,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options;\n  var base = \"?query=\".concat(enc(query));\n  var qString = Object.keys(params).reduce(function (qs, param) {\n    return \"\".concat(qs, \"&\").concat(enc(\"$\".concat(param)), \"=\").concat(enc(JSON.stringify(params[param])));\n  }, base);\n  return Object.keys(options).reduce(function (qs, option) {\n    // Only include the option if it is truthy\n    return options[option] ? \"\".concat(qs, \"&\").concat(enc(option), \"=\").concat(enc(options[option])) : qs;\n  }, qString);\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar Observable = require('@sanity/observable/minimal');\n\nvar polyfilledEventSource = require('@sanity/eventsource');\n\nvar pick = require('../util/pick');\n\nvar defaults = require('../util/defaults');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar once = require('../util/once');\n\nvar tokenWarning = ['Using token with listeners is not supported in browsers. ', \"For more info, see \".concat(generateHelpUrl('js-client-listener-tokens-browser'), \".\")]; // eslint-disable-next-line no-console\n\nvar printTokenWarning = once(function () {\n  return console.warn(tokenWarning.join(' '));\n});\nvar isWindowEventSource = Boolean(typeof window !== 'undefined' && window.EventSource);\nvar EventSource = isWindowEventSource ? window.EventSource // Native browser EventSource\n: polyfilledEventSource; // Node.js, IE etc\n\nvar possibleOptions = ['includePreviousRevision', 'includeResult', 'visibility', 'effectFormat'];\nvar defaultOptions = {\n  includeResult: true\n};\n\nmodule.exports = function listen(query, params) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var options = defaults(opts, defaultOptions);\n  var listenOpts = pick(options, possibleOptions);\n  var qs = encodeQueryString({\n    query: query,\n    params: params,\n    options: listenOpts\n  });\n  var _this$clientConfig = this.clientConfig,\n      url = _this$clientConfig.url,\n      token = _this$clientConfig.token,\n      withCredentials = _this$clientConfig.withCredentials;\n  var uri = \"\".concat(url).concat(this.getDataUrl('listen', qs));\n  var listenFor = options.events ? options.events : ['mutation'];\n  var shouldEmitReconnect = listenFor.indexOf('reconnect') !== -1;\n\n  if (token && isWindowEventSource) {\n    printTokenWarning();\n  }\n\n  var esOptions = {};\n\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n\n  return new Observable(function (observer) {\n    var es = getEventSource();\n    var reconnectTimer;\n    var stopped = false;\n\n    function onError() {\n      if (stopped) {\n        return;\n      }\n\n      emitReconnect(); // Allow event handlers of `emitReconnect` to cancel/close the reconnect attempt\n\n      if (stopped) {\n        return;\n      } // Unless we've explicitly stopped the ES (in which case `stopped` should be true),\n      // we should never be in a disconnected state. By default, EventSource will reconnect\n      // automatically, in which case it sets readyState to `CONNECTING`, but in some cases\n      // (like when a laptop lid is closed), it closes the connection. In these cases we need\n      // to explicitly reconnect.\n\n\n      if (es.readyState === EventSource.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n\n    function onMessage(evt) {\n      var event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n\n    function onDisconnect(evt) {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n\n    function unsubscribe() {\n      es.removeEventListener('error', onError, false);\n      es.removeEventListener('channelError', onChannelError, false);\n      es.removeEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return es.removeEventListener(type, onMessage, false);\n      });\n      es.close();\n    }\n\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: 'reconnect'\n        });\n      }\n    }\n\n    function getEventSource() {\n      var evs = new EventSource(uri, esOptions);\n      evs.addEventListener('error', onError, false);\n      evs.addEventListener('channelError', onChannelError, false);\n      evs.addEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return evs.addEventListener(type, onMessage, false);\n      });\n      return evs;\n    }\n\n    function open() {\n      es = getEventSource();\n    }\n\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n\n    return stop;\n  });\n};\n\nfunction parseEvent(event) {\n  try {\n    var data = event.data && JSON.parse(event.data) || {};\n    return assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\n\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n\n  var evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\n\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || 'Unknown listener error';\n  }\n\n  if (err.error.description) {\n    return err.error.description;\n  }\n\n  return typeof err.error === 'string' ? err.error : JSON.stringify(err.error, null, 2);\n}","\"use strict\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar deepAssign = require('deep-assign');\n\nvar assign = require('object-assign');\n\nvar getSelection = require('../util/getSelection');\n\nvar validate = require('../validators');\n\nvar validateObject = validate.validateObject;\nvar validateInsert = validate.validateInsert;\n\nfunction Patch(selection) {\n  var operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var client = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  this.selection = selection;\n  this.operations = assign({}, operations);\n  this.client = client;\n}\n\nassign(Patch.prototype, {\n  clone: function clone() {\n    return new Patch(this.selection, assign({}, this.operations), this.client);\n  },\n  merge: function merge(props) {\n    validateObject('merge', props);\n    var stack = new Error().stack.toString().split('\\n').filter(function (str) {\n      return str.trim();\n    }).slice(2);\n    console.warn(\"The \\\"merge\\\" patch has been deprecated and will be removed in the future\\n\".concat(stack.join('\\n')));\n    return this._assign('merge', deepAssign(this.operations.merge || {}, props));\n  },\n  set: function set(props) {\n    return this._assign('set', props);\n  },\n  diffMatchPatch: function diffMatchPatch(props) {\n    validateObject('diffMatchPatch', props);\n    return this._assign('diffMatchPatch', props);\n  },\n  unset: function unset(attrs) {\n    if (!Array.isArray(attrs)) {\n      throw new Error('unset(attrs) takes an array of attributes to unset, non-array given');\n    }\n\n    this.operations = assign({}, this.operations, {\n      unset: attrs\n    });\n    return this;\n  },\n  setIfMissing: function setIfMissing(props) {\n    return this._assign('setIfMissing', props);\n  },\n  replace: function replace(props) {\n    validateObject('replace', props);\n    return this._set('set', {\n      $: props\n    }); // eslint-disable-line id-length\n  },\n  inc: function inc(props) {\n    return this._assign('inc', props);\n  },\n  dec: function dec(props) {\n    return this._assign('dec', props);\n  },\n  insert: function insert(at, selector, items) {\n    var _this$_assign;\n\n    validateInsert(at, selector, items);\n    return this._assign('insert', (_this$_assign = {}, _defineProperty(_this$_assign, at, selector), _defineProperty(_this$_assign, \"items\", items), _this$_assign));\n  },\n  append: function append(selector, items) {\n    return this.insert('after', \"\".concat(selector, \"[-1]\"), items);\n  },\n  prepend: function prepend(selector, items) {\n    return this.insert('before', \"\".concat(selector, \"[0]\"), items);\n  },\n  splice: function splice(selector, start, deleteCount, items) {\n    // Negative indexes doesn't mean the same in Sanity as they do in JS;\n    // -1 means \"actually at the end of the array\", which allows inserting\n    // at the end of the array without knowing its length. We therefore have\n    // to substract negative indexes by one to match JS. If you want Sanity-\n    // behaviour, just use `insert('replace', selector, items)` directly\n    var delAll = typeof deleteCount === 'undefined' || deleteCount === -1;\n    var startIndex = start < 0 ? start - 1 : start;\n    var delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n    var delRange = startIndex < 0 && delCount >= 0 ? '' : delCount;\n    var rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n    return this.insert('replace', rangeSelector, items || []);\n  },\n  ifRevisionId: function ifRevisionId(rev) {\n    this.operations.ifRevisionID = rev;\n    return this;\n  },\n  serialize: function serialize() {\n    return assign(getSelection(this.selection), this.operations);\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.client) {\n      throw new Error('No `client` passed to patch, either provide one or pass the ' + 'patch to a clients `mutate()` method');\n    }\n\n    var returnFirst = typeof this.selection === 'string';\n    var opts = assign({\n      returnFirst: returnFirst,\n      returnDocuments: true\n    }, options);\n    return this.client.mutate({\n      patch: this.serialize()\n    }, opts);\n  },\n  reset: function reset() {\n    this.operations = {};\n    return this;\n  },\n  _set: function _set(op, props) {\n    return this._assign(op, props, false);\n  },\n  _assign: function _assign(op, props) {\n    var merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    validateObject(op, props);\n    this.operations = assign({}, this.operations, _defineProperty({}, op, assign({}, merge && this.operations[op] || {}, props)));\n    return this;\n  }\n});\nmodule.exports = Patch;","\"use strict\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar validate = require('../validators');\n\nfunction DatasetsClient(client) {\n  this.request = client.request.bind(client);\n}\n\nassign(DatasetsClient.prototype, {\n  create: function create(name, options) {\n    return this._modify('PUT', name, options);\n  },\n  edit: function edit(name, options) {\n    return this._modify('PATCH', name, options);\n  },\n  delete: function _delete(name) {\n    return this._modify('DELETE', name);\n  },\n  list: function list() {\n    return this.request({\n      uri: '/datasets'\n    });\n  },\n  _modify: function _modify(method, name, body) {\n    validate.dataset(name);\n    return this.request({\n      method: method,\n      uri: \"/datasets/\".concat(name),\n      body: body\n    });\n  }\n});\nmodule.exports = DatasetsClient;","\"use strict\";\n\nmodule.exports = [];","\"use strict\";\n\nvar makeError = require('make-error');\n\nvar assign = require('object-assign');\n\nfunction ClientError(res) {\n  var props = extractErrorProps(res);\n  ClientError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction ServerError(res) {\n  var props = extractErrorProps(res);\n  ServerError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction extractErrorProps(res) {\n  var body = res.body;\n  var props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res)\n  }; // API/Boom style errors ({statusCode, error, message})\n\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  } // Query/database errors ({error: {description, other, arb, props}})\n\n\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  } // Other, more arbitrary errors\n\n\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\n\nfunction httpErrorMessage(res) {\n  var statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : '';\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\n\nfunction stringifyBody(body, res) {\n  var contentType = (res.headers['content-type'] || '').toLowerCase();\n  var isJson = contentType.indexOf('application/json') !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\n\nmakeError(ClientError);\nmakeError(ServerError);\nexports.ClientError = ClientError;\nexports.ServerError = ServerError;","\"use strict\";\n\nmodule.exports = function (params) {\n  var qs = [];\n\n  for (var key in params) {\n    if (params.hasOwnProperty(key)) {\n      qs.push(\"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key])));\n    }\n  }\n\n  return qs.length > 0 ? \"?\".concat(qs.join('&')) : '';\n};","\"use strict\";\n/* eslint-disable no-empty-function, no-process-env */\n\nvar getIt = require('get-it');\n\nvar assign = require('object-assign');\n\nvar observable = require('get-it/lib/middleware/observable');\n\nvar jsonRequest = require('get-it/lib/middleware/jsonRequest');\n\nvar jsonResponse = require('get-it/lib/middleware/jsonResponse');\n\nvar progress = require('get-it/lib/middleware/progress');\n\nvar Observable = require('@sanity/observable/minimal');\n\nvar _require = require('./errors'),\n    ClientError = _require.ClientError,\n    ServerError = _require.ServerError;\n\nvar httpError = {\n  onResponse: function onResponse(res) {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n\n    return res;\n  }\n}; // Environment-specific middleware.\n\nvar envSpecific = require('./nodeMiddleware');\n\nvar middleware = envSpecific.concat([jsonRequest(), jsonResponse(), progress(), httpError, observable({\n  implementation: Observable\n})]);\nvar request = getIt(middleware);\n\nfunction httpRequest(options) {\n  var requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n  return requester(assign({\n    maxRedirects: 0\n  }, options));\n}\n\nhttpRequest.defaultRequester = request;\nhttpRequest.ClientError = ClientError;\nhttpRequest.ServerError = ServerError;\nmodule.exports = httpRequest;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar projectHeader = 'X-Sanity-Project-ID';\n\nmodule.exports = function (config) {\n  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var headers = {};\n  var token = overrides.token || config.token;\n\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n\n  var withCredentials = Boolean(typeof overrides.withCredentials === 'undefined' ? config.token || config.withCredentials : overrides.withCredentials);\n  var timeout = typeof overrides.timeout === 'undefined' ? config.timeout : overrides.timeout;\n  return assign({}, overrides, {\n    headers: assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === 'undefined' ? 5 * 60 * 1000 : timeout,\n    json: true,\n    withCredentials: withCredentials\n  });\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction ProjectsClient(client) {\n  this.client = client;\n}\n\nassign(ProjectsClient.prototype, {\n  list: function list() {\n    return this.client.request({\n      uri: '/projects'\n    });\n  },\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/projects/\".concat(id)\n    });\n  }\n});\nmodule.exports = ProjectsClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require3 = require('./config'),\n    defaultConfig = _require3.defaultConfig,\n    initConfig = _require3.initConfig;\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  getUrl: function getUrl(uri) {\n    var canUseCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = canUseCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var uri = options.url || options.uri;\n    var canUseCdn = this.clientConfig.useCdn && ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0;\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, canUseCdn)\n    }));\n    return httpRequest(reqOptions, this.clientConfig.requester);\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction UsersClient(client) {\n  this.client = client;\n}\n\nassign(UsersClient.prototype, {\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/users/\".concat(id)\n    });\n  }\n});\nmodule.exports = UsersClient;","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nmodule.exports = function (obj, defaults) {\n  return Object.keys(defaults).concat(Object.keys(obj)).reduce(function (target, prop) {\n    target[prop] = typeof obj[prop] === 'undefined' ? defaults[prop] : obj[prop];\n    return target;\n  }, {});\n};","\"use strict\";\n\nmodule.exports = function getSelection(sel) {\n  if (typeof sel === 'string' || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n\n  if (sel && sel.query) {\n    return {\n      query: sel.query\n    };\n  }\n\n  var selectionOpts = ['* Document ID (<docId>)', '* Array of document IDs', '* Object containing `query`'].join('\\n');\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n};","\"use strict\";\n\nmodule.exports = function (fn) {\n  var didCall = false;\n  var returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n\n    returnValue = fn.apply(void 0, arguments);\n    didCall = true;\n    return returnValue;\n  };\n};","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nmodule.exports = function (obj, props) {\n  return props.reduce(function (selection, prop) {\n    if (typeof obj[prop] === 'undefined') {\n      return selection;\n    }\n\n    selection[prop] = obj[prop];\n    return selection;\n  }, {});\n};","\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar VALID_ASSET_TYPES = ['image', 'file'];\nvar VALID_INSERT_LOCATIONS = ['before', 'after', 'replace'];\n\nexports.dataset = function (name) {\n  if (!/^[-\\w]{1,128}$/.test(name)) {\n    throw new Error('Datasets can only contain lowercase characters, numbers, underscores and dashes');\n  }\n};\n\nexports.projectId = function (id) {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error('`projectId` can only contain only a-z, 0-9 and dashes');\n  }\n};\n\nexports.validateAssetType = function (type) {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(', ')));\n  }\n};\n\nexports.validateObject = function (op, val) {\n  if (val === null || _typeof(val) !== 'object' || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\n\nexports.requireDocumentId = function (op, doc) {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, \"() requires that the document contains an ID (\\\"_id\\\" property)\"));\n  }\n\n  exports.validateDocumentId(op, doc._id);\n};\n\nexports.validateDocumentId = function (op, id) {\n  if (typeof id !== 'string' || !/^[a-z0-9_.-]+$/i.test(id)) {\n    throw new Error(\"\".concat(op, \"(): \\\"\").concat(id, \"\\\" is not a valid document ID\"));\n  }\n};\n\nexports.validateInsert = function (at, selector, items) {\n  var signature = 'insert(at, selector, items)';\n\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    var valid = VALID_INSERT_LOCATIONS.map(function (loc) {\n      return \"\\\"\".concat(loc, \"\\\"\");\n    }).join(', ');\n    throw new Error(\"\".concat(signature, \" takes an \\\"at\\\"-argument which is one of: \").concat(valid));\n  }\n\n  if (typeof selector !== 'string') {\n    throw new Error(\"\".concat(signature, \" takes a \\\"selector\\\"-argument which must be a string\"));\n  }\n\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, \" takes an \\\"items\\\"-argument which must be an array\"));\n  }\n};\n\nexports.hasDataset = function (config) {\n  if (!config.gradientMode && !config.dataset) {\n    throw new Error('`dataset` must be provided to perform queries');\n  }\n\n  return config.dataset || '';\n};","/* eslint-disable no-var */\nvar evs = require('@rexxars/eventsource-polyfill');\n\nmodule.exports = window.EventSource || evs.EventSource;","var baseUrl = 'https://docs.sanity.io/help/';\n\nmodule.exports = function generateHelpUrl(slug) {\n  return baseUrl + slug;\n};","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.SanityImageUrlBuilder = factory());\n})(this, function () {\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o) {\n    var i = 0;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    i = o[Symbol.iterator]();\n    return i.next.bind(i);\n  }\n\n  var example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg';\n\n  function parseAssetId(ref) {\n    var _ref$split = ref.split('-'),\n        id = _ref$split[1],\n        dimensionString = _ref$split[2],\n        format = _ref$split[3];\n\n    if (!id || !dimensionString || !format) {\n      throw new Error(\"Malformed asset _ref '\" + ref + \"'. Expected an id like \\\"\" + example + \"\\\".\");\n    }\n\n    var _dimensionString$spli = dimensionString.split('x'),\n        imgWidthStr = _dimensionString$spli[0],\n        imgHeightStr = _dimensionString$spli[1];\n\n    var width = +imgWidthStr;\n    var height = +imgHeightStr;\n    var isValidAssetId = isFinite(width) && isFinite(height);\n\n    if (!isValidAssetId) {\n      throw new Error(\"Malformed asset _ref '\" + ref + \"'. Expected an id like \\\"\" + example + \"\\\".\");\n    }\n\n    return {\n      id: id,\n      width: width,\n      height: height,\n      format: format\n    };\n  }\n\n  var isRef = function isRef(src) {\n    var source = src;\n    return source ? typeof source._ref === 'string' : false;\n  };\n\n  var isAsset = function isAsset(src) {\n    var source = src;\n    return source ? typeof source._id === 'string' : false;\n  };\n\n  var isAssetStub = function isAssetStub(src) {\n    var source = src;\n    return source && source.asset ? typeof source.asset.url === 'string' : false;\n  };\n\n  function parseSource(source) {\n    if (!source) {\n      return null;\n    }\n\n    var image;\n\n    if (typeof source === 'string' && isUrl(source)) {\n      image = {\n        asset: {\n          _ref: urlToId(source)\n        }\n      };\n    } else if (typeof source === 'string') {\n      image = {\n        asset: {\n          _ref: source\n        }\n      };\n    } else if (isRef(source)) {\n      image = {\n        asset: source\n      };\n    } else if (isAsset(source)) {\n      image = {\n        asset: {\n          _ref: source._id || ''\n        }\n      };\n    } else if (isAssetStub(source)) {\n      image = {\n        asset: {\n          _ref: urlToId(source.asset.url)\n        }\n      };\n    } else if (typeof source.asset === 'object') {\n      image = source;\n    } else {\n      return null;\n    }\n\n    var img = source;\n\n    if (img.crop) {\n      image.crop = img.crop;\n    }\n\n    if (img.hotspot) {\n      image.hotspot = img.hotspot;\n    }\n\n    return applyDefaults(image);\n  }\n\n  function isUrl(url) {\n    return /^https?:\\/\\//.test(\"\" + url);\n  }\n\n  function urlToId(url) {\n    var parts = url.split('/').slice(-1);\n    return (\"image-\" + parts[0]).replace(/\\.([a-z]+)$/, '-$1');\n  }\n\n  function applyDefaults(image) {\n    if (image.crop && image.hotspot) {\n      return image;\n    }\n\n    var result = _extends({}, image);\n\n    if (!result.crop) {\n      result.crop = {\n        left: 0,\n        top: 0,\n        bottom: 0,\n        right: 0\n      };\n    }\n\n    if (!result.hotspot) {\n      result.hotspot = {\n        x: 0.5,\n        y: 0.5,\n        height: 1.0,\n        width: 1.0\n      };\n    }\n\n    return result;\n  }\n\n  var SPEC_NAME_TO_URL_NAME_MAPPINGS = [['width', 'w'], ['height', 'h'], ['format', 'fm'], ['download', 'dl'], ['blur', 'blur'], ['sharpen', 'sharp'], ['invert', 'invert'], ['orientation', 'or'], ['minHeight', 'min-h'], ['maxHeight', 'max-h'], ['minWidth', 'min-w'], ['maxWidth', 'max-w'], ['quality', 'q'], ['fit', 'fit'], ['crop', 'crop'], ['saturation', 'sat'], ['auto', 'auto'], ['dpr', 'dpr']];\n\n  function urlForImage(options) {\n    var spec = _extends({}, options || {});\n\n    var source = spec.source;\n    delete spec.source;\n    var image = parseSource(source);\n\n    if (!image) {\n      return null;\n    }\n\n    var id = image.asset._ref || image.asset._id || '';\n    var asset = parseAssetId(id);\n    var cropLeft = Math.round(image.crop.left * asset.width);\n    var cropTop = Math.round(image.crop.top * asset.height);\n    var crop = {\n      left: cropLeft,\n      top: cropTop,\n      width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n      height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop)\n    };\n    var hotSpotVerticalRadius = image.hotspot.height * asset.height / 2;\n    var hotSpotHorizontalRadius = image.hotspot.width * asset.width / 2;\n    var hotSpotCenterX = image.hotspot.x * asset.width;\n    var hotSpotCenterY = image.hotspot.y * asset.height;\n    var hotspot = {\n      left: hotSpotCenterX - hotSpotHorizontalRadius,\n      top: hotSpotCenterY - hotSpotVerticalRadius,\n      right: hotSpotCenterX + hotSpotHorizontalRadius,\n      bottom: hotSpotCenterY + hotSpotVerticalRadius\n    };\n\n    if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n      spec = _extends(_extends({}, spec), fit({\n        crop: crop,\n        hotspot: hotspot\n      }, spec));\n    }\n\n    return specToImageUrl(_extends(_extends({}, spec), {}, {\n      asset: asset\n    }));\n  }\n\n  function specToImageUrl(spec) {\n    var cdnUrl = spec.baseUrl || 'https://cdn.sanity.io';\n    var filename = spec.asset.id + \"-\" + spec.asset.width + \"x\" + spec.asset.height + \".\" + spec.asset.format;\n    var baseUrl = cdnUrl + \"/images/\" + spec.projectId + \"/\" + spec.dataset + \"/\" + filename;\n    var params = [];\n\n    if (spec.rect) {\n      var _spec$rect = spec.rect,\n          left = _spec$rect.left,\n          top = _spec$rect.top,\n          width = _spec$rect.width,\n          height = _spec$rect.height;\n      var isEffectiveCrop = left !== 0 || top !== 0 || height !== spec.asset.height || width !== spec.asset.width;\n\n      if (isEffectiveCrop) {\n        params.push(\"rect=\" + left + \",\" + top + \",\" + width + \",\" + height);\n      }\n    }\n\n    if (spec.bg) {\n      params.push(\"bg=\" + spec.bg);\n    }\n\n    if (spec.focalPoint) {\n      params.push(\"fp-x=\" + spec.focalPoint.x);\n      params.push(\"fp-y=\" + spec.focalPoint.y);\n    }\n\n    var flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('');\n\n    if (flip) {\n      params.push(\"flip=\" + flip);\n    }\n\n    SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach(function (mapping) {\n      var specName = mapping[0],\n          param = mapping[1];\n\n      if (typeof spec[specName] !== 'undefined') {\n        params.push(param + \"=\" + encodeURIComponent(spec[specName]));\n      } else if (typeof spec[param] !== 'undefined') {\n        params.push(param + \"=\" + encodeURIComponent(spec[param]));\n      }\n    });\n\n    if (params.length === 0) {\n      return baseUrl;\n    }\n\n    return baseUrl + \"?\" + params.join('&');\n  }\n\n  function fit(source, spec) {\n    var cropRect;\n    var imgWidth = spec.width;\n    var imgHeight = spec.height;\n\n    if (!(imgWidth && imgHeight)) {\n      return {\n        width: imgWidth,\n        height: imgHeight,\n        rect: source.crop\n      };\n    }\n\n    var crop = source.crop;\n    var hotspot = source.hotspot;\n    var desiredAspectRatio = imgWidth / imgHeight;\n    var cropAspectRatio = crop.width / crop.height;\n\n    if (cropAspectRatio > desiredAspectRatio) {\n      var height = crop.height;\n      var width = height * desiredAspectRatio;\n      var top = crop.top;\n      var hotspotXCenter = (hotspot.right - hotspot.left) / 2 + hotspot.left;\n      var left = hotspotXCenter - width / 2;\n\n      if (left < crop.left) {\n        left = crop.left;\n      } else if (left + width > crop.left + crop.width) {\n        left = crop.left + crop.width - width;\n      }\n\n      cropRect = {\n        left: Math.round(left),\n        top: Math.round(top),\n        width: Math.round(width),\n        height: Math.round(height)\n      };\n    } else {\n      var _width = crop.width;\n\n      var _height = _width / desiredAspectRatio;\n\n      var _left = crop.left;\n      var hotspotYCenter = (hotspot.bottom - hotspot.top) / 2 + hotspot.top;\n\n      var _top = hotspotYCenter - _height / 2;\n\n      if (_top < crop.top) {\n        _top = crop.top;\n      } else if (_top + _height > crop.top + crop.height) {\n        _top = crop.top + crop.height - _height;\n      }\n\n      cropRect = {\n        left: Math.max(0, Math.floor(_left)),\n        top: Math.max(0, Math.floor(_top)),\n        width: Math.round(_width),\n        height: Math.round(_height)\n      };\n    }\n\n    return {\n      width: imgWidth,\n      height: imgHeight,\n      rect: cropRect\n    };\n  }\n\n  var validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min'];\n  var validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy'];\n  var validAutoModes = ['format'];\n\n  function isSanityClient(client) {\n    return client ? typeof client.clientConfig === 'object' : false;\n  }\n\n  function rewriteSpecName(key) {\n    var specs = SPEC_NAME_TO_URL_NAME_MAPPINGS;\n\n    for (var _iterator = _createForOfIteratorHelperLoose(specs), _step; !(_step = _iterator()).done;) {\n      var entry = _step.value;\n      var specName = entry[0],\n          param = entry[1];\n\n      if (key === specName || key === param) {\n        return specName;\n      }\n    }\n\n    return key;\n  }\n\n  function urlBuilder(options) {\n    var client = options;\n\n    if (isSanityClient(client)) {\n      var _client$clientConfig = client.clientConfig,\n          apiUrl = _client$clientConfig.apiHost,\n          projectId = _client$clientConfig.projectId,\n          dataset = _client$clientConfig.dataset;\n      var apiHost = apiUrl || 'https://api.sanity.io';\n      return new ImageUrlBuilder(null, {\n        baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n        projectId: projectId,\n        dataset: dataset\n      });\n    }\n\n    return new ImageUrlBuilder(null, options);\n  }\n\n  var ImageUrlBuilder = /*#__PURE__*/function () {\n    function ImageUrlBuilder(parent, options) {\n      this.options = parent ? _extends(_extends({}, parent.options || {}), options || {}) : _extends({}, options || {});\n    }\n\n    var _proto = ImageUrlBuilder.prototype;\n\n    _proto.withOptions = function withOptions(options) {\n      var baseUrl = options.baseUrl || this.options.baseUrl;\n      var newOptions = {\n        baseUrl: baseUrl\n      };\n\n      for (var key in options) {\n        if (options.hasOwnProperty(key)) {\n          var specKey = rewriteSpecName(key);\n          newOptions[specKey] = options[key];\n        }\n      }\n\n      return new ImageUrlBuilder(this, _extends({\n        baseUrl: baseUrl\n      }, newOptions));\n    };\n\n    _proto.image = function image(source) {\n      return this.withOptions({\n        source: source\n      });\n    };\n\n    _proto.dataset = function dataset(_dataset) {\n      return this.withOptions({\n        dataset: _dataset\n      });\n    };\n\n    _proto.projectId = function projectId(_projectId) {\n      return this.withOptions({\n        projectId: _projectId\n      });\n    };\n\n    _proto.bg = function bg(_bg) {\n      return this.withOptions({\n        bg: _bg\n      });\n    };\n\n    _proto.dpr = function dpr(_dpr) {\n      return this.withOptions({\n        dpr: _dpr\n      });\n    };\n\n    _proto.width = function width(_width) {\n      return this.withOptions({\n        width: _width\n      });\n    };\n\n    _proto.height = function height(_height) {\n      return this.withOptions({\n        height: _height\n      });\n    };\n\n    _proto.focalPoint = function focalPoint(x, y) {\n      return this.withOptions({\n        focalPoint: {\n          x: x,\n          y: y\n        }\n      });\n    };\n\n    _proto.maxWidth = function maxWidth(_maxWidth) {\n      return this.withOptions({\n        maxWidth: _maxWidth\n      });\n    };\n\n    _proto.minWidth = function minWidth(_minWidth) {\n      return this.withOptions({\n        minWidth: _minWidth\n      });\n    };\n\n    _proto.maxHeight = function maxHeight(_maxHeight) {\n      return this.withOptions({\n        maxHeight: _maxHeight\n      });\n    };\n\n    _proto.minHeight = function minHeight(_minHeight) {\n      return this.withOptions({\n        minHeight: _minHeight\n      });\n    };\n\n    _proto.size = function size(width, height) {\n      return this.withOptions({\n        width: width,\n        height: height\n      });\n    };\n\n    _proto.blur = function blur(_blur) {\n      return this.withOptions({\n        blur: _blur\n      });\n    };\n\n    _proto.sharpen = function sharpen(_sharpen) {\n      return this.withOptions({\n        sharpen: _sharpen\n      });\n    };\n\n    _proto.rect = function rect(left, top, width, height) {\n      return this.withOptions({\n        rect: {\n          left: left,\n          top: top,\n          width: width,\n          height: height\n        }\n      });\n    };\n\n    _proto.format = function format(_format) {\n      return this.withOptions({\n        format: _format\n      });\n    };\n\n    _proto.invert = function invert(_invert) {\n      return this.withOptions({\n        invert: _invert\n      });\n    };\n\n    _proto.orientation = function orientation(_orientation) {\n      return this.withOptions({\n        orientation: _orientation\n      });\n    };\n\n    _proto.quality = function quality(_quality) {\n      return this.withOptions({\n        quality: _quality\n      });\n    };\n\n    _proto.forceDownload = function forceDownload(download) {\n      return this.withOptions({\n        download: download\n      });\n    };\n\n    _proto.flipHorizontal = function flipHorizontal() {\n      return this.withOptions({\n        flipHorizontal: true\n      });\n    };\n\n    _proto.flipVertical = function flipVertical() {\n      return this.withOptions({\n        flipVertical: true\n      });\n    };\n\n    _proto.ignoreImageParams = function ignoreImageParams() {\n      return this.withOptions({\n        ignoreImageParams: true\n      });\n    };\n\n    _proto.fit = function fit(value) {\n      if (validFits.indexOf(value) === -1) {\n        throw new Error(\"Invalid fit mode \\\"\" + value + \"\\\"\");\n      }\n\n      return this.withOptions({\n        fit: value\n      });\n    };\n\n    _proto.crop = function crop(value) {\n      if (validCrops.indexOf(value) === -1) {\n        throw new Error(\"Invalid crop mode \\\"\" + value + \"\\\"\");\n      }\n\n      return this.withOptions({\n        crop: value\n      });\n    };\n\n    _proto.saturation = function saturation(_saturation) {\n      return this.withOptions({\n        saturation: _saturation\n      });\n    };\n\n    _proto.auto = function auto(value) {\n      if (validAutoModes.indexOf(value) === -1) {\n        throw new Error(\"Invalid auto mode \\\"\" + value + \"\\\"\");\n      }\n\n      return this.withOptions({\n        auto: value\n      });\n    };\n\n    _proto.url = function url() {\n      return urlForImage(this.options);\n    };\n\n    _proto.toString = function toString() {\n      return this.url();\n    };\n\n    return ImageUrlBuilder;\n  }();\n\n  return urlBuilder;\n});","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nvar _require = require('rxjs/internal/Observable'),\n    Observable = _require.Observable;\n\nvar assign = require('object-assign');\n\nvar _require2 = require('../operators/map'),\n    map = _require2.map;\n\nvar _require3 = require('../operators/filter'),\n    filter = _require3.filter;\n\nvar _require4 = require('../operators/reduce'),\n    reduce = _require4.reduce;\n/*\n A minimal rxjs based observable that align as closely as possible with the current es-observable spec,\n without the static factory methods\n */\n\n\nfunction SanityObservableMinimal() {\n  Observable.apply(this, arguments); // eslint-disable-line prefer-rest-params\n}\n\nSanityObservableMinimal.prototype = Object.create(assign(Object.create(null), Observable.prototype));\nObject.defineProperty(SanityObservableMinimal.prototype, 'constructor', {\n  value: SanityObservableMinimal,\n  enumerable: false,\n  writable: true,\n  configurable: true\n});\n\nSanityObservableMinimal.prototype.lift = function lift(operator) {\n  var observable = new SanityObservableMinimal();\n  observable.source = this;\n  observable.operator = operator;\n  return observable;\n};\n\nfunction createDeprecatedMemberOp(name, op) {\n  var hasWarned = false;\n  return function deprecatedOperator() {\n    if (!hasWarned) {\n      hasWarned = true;\n      console.warn(new Error(\"Calling observable.\".concat(name, \"(...) is deprecated. Please use observable.pipe(\").concat(name, \"(...)) instead\")));\n    }\n\n    return this.pipe(op.apply(this, arguments));\n  };\n}\n\nSanityObservableMinimal.prototype.map = createDeprecatedMemberOp('map', map);\nSanityObservableMinimal.prototype.filter = createDeprecatedMemberOp('filter', filter);\nSanityObservableMinimal.prototype.reduce = createDeprecatedMemberOp('filter', reduce);\nmodule.exports = SanityObservableMinimal;","module.exports = require('./lib/SanityObservableMinimal');","exports.filter = require('rxjs/internal/operators/filter').filter;","exports.map = require('rxjs/internal/operators/map').map;","require(\"core-js/modules/es.array.reduce.js\");\n\nexports.reduce = require('rxjs/internal/operators/reduce').reduce;","'use strict';\n\nvar isObj = require('is-obj');\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Sources cannot be null or undefined');\n  }\n\n  return Object(val);\n}\n\nfunction assignKey(to, from, key) {\n  var val = from[key];\n\n  if (val === undefined || val === null) {\n    return;\n  }\n\n  if (hasOwnProperty.call(to, key)) {\n    if (to[key] === undefined || to[key] === null) {\n      throw new TypeError('Cannot convert undefined or null to object (' + key + ')');\n    }\n  }\n\n  if (!hasOwnProperty.call(to, key) || !isObj(val)) {\n    to[key] = val;\n  } else {\n    to[key] = assign(Object(to[key]), from[key]);\n  }\n}\n\nfunction assign(to, from) {\n  if (to === from) {\n    return to;\n  }\n\n  from = Object(from);\n\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      assignKey(to, from, key);\n    }\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(from);\n\n    for (var i = 0; i < symbols.length; i++) {\n      if (propIsEnumerable.call(from, symbols[i])) {\n        assignKey(to, from, symbols[i]);\n      }\n    }\n  }\n\n  return to;\n}\n\nmodule.exports = function deepAssign(target) {\n  target = toObject(target);\n\n  for (var s = 1; s < arguments.length; s++) {\n    assign(target, arguments[s]);\n  }\n\n  return target;\n};","module.exports = require('./lib-node');","'use strict';\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nvar pubsub = require('nano-pubsub');\n\nvar middlewareReducer = require('./util/middlewareReducer');\n\nvar processOptions = require('./middleware/defaultOptionsProcessor');\n\nvar validateOptions = require('./middleware/defaultOptionsValidator');\n\nvar httpRequest = require('./request'); // node-request in node, browser-request in browsers\n\n\nvar channelNames = ['request', 'response', 'progress', 'error', 'abort'];\nvar middlehooks = ['processOptions', 'validateOptions', 'interceptRequest', 'finalizeOptions', 'onRequest', 'onResponse', 'onError', 'onReturn', 'onHeaders'];\n\nmodule.exports = function createRequester() {\n  var initMiddleware = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var loadedMiddleware = [];\n  var middleware = middlehooks.reduce(function (ware, name) {\n    ware[name] = ware[name] || [];\n    return ware;\n  }, {\n    processOptions: [processOptions],\n    validateOptions: [validateOptions]\n  });\n\n  function request(opts) {\n    var channels = channelNames.reduce(function (target, name) {\n      target[name] = pubsub();\n      return target;\n    }, {}); // Prepare a middleware reducer that can be reused throughout the lifecycle\n\n    var applyMiddleware = middlewareReducer(middleware); // Parse the passed options\n\n    var options = applyMiddleware('processOptions', opts); // Validate the options\n\n    applyMiddleware('validateOptions', options); // Build a context object we can pass to child handlers\n\n    var context = {\n      options: options,\n      channels: channels,\n      applyMiddleware: applyMiddleware // We need to hold a reference to the current, ongoing request,\n      // in order to allow cancellation. In the case of the retry middleware,\n      // a new request might be triggered\n\n    };\n    var ongoingRequest = null;\n    var unsubscribe = channels.request.subscribe(function (ctx) {\n      // Let request adapters (node/browser) perform the actual request\n      ongoingRequest = httpRequest(ctx, function (err, res) {\n        return onResponse(err, res, ctx);\n      });\n    }); // If we abort the request, prevent further requests from happening,\n    // and be sure to cancel any ongoing request (obviously)\n\n    channels.abort.subscribe(function () {\n      unsubscribe();\n\n      if (ongoingRequest) {\n        ongoingRequest.abort();\n      }\n    }); // See if any middleware wants to modify the return value - for instance\n    // the promise or observable middlewares\n\n    var returnValue = applyMiddleware('onReturn', channels, context); // If return value has been modified by a middleware, we expect the middleware\n    // to publish on the 'request' channel. If it hasn't been modified, we want to\n    // trigger it right away\n\n    if (returnValue === channels) {\n      channels.request.publish(context);\n    }\n\n    return returnValue;\n\n    function onResponse(reqErr, res, ctx) {\n      var error = reqErr;\n      var response = res; // We're processing non-errors first, in case a middleware converts the\n      // response into an error (for instance, status >= 400 == HttpError)\n\n      if (!error) {\n        try {\n          response = applyMiddleware('onResponse', res, ctx);\n        } catch (err) {\n          response = null;\n          error = err;\n        }\n      } // Apply error middleware - if middleware return the same (or a different) error,\n      // publish as an error event. If we *don't* return an error, assume it has been handled\n\n\n      error = error && applyMiddleware('onError', error, ctx); // Figure out if we should publish on error/response channels\n\n      if (error) {\n        channels.error.publish(error);\n      } else if (response) {\n        channels.response.publish(response);\n      }\n    }\n  }\n\n  request.use = function use(newMiddleware) {\n    if (!newMiddleware) {\n      throw new Error('Tried to add middleware that resolved to falsey value');\n    }\n\n    if (typeof newMiddleware === 'function') {\n      throw new Error('Tried to add middleware that was a function. It probably expects you to pass options to it.');\n    }\n\n    if (newMiddleware.onReturn && middleware.onReturn.length > 0) {\n      throw new Error('Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event');\n    }\n\n    middlehooks.forEach(function (key) {\n      if (newMiddleware[key]) {\n        middleware[key].push(newMiddleware[key]);\n      }\n    });\n    loadedMiddleware.push(newMiddleware);\n    return request;\n  };\n\n  request.clone = function clone() {\n    return createRequester(loadedMiddleware);\n  };\n\n  initMiddleware.forEach(request.use);\n  return request;\n};","'use strict';\n\nvar objectAssign = require('object-assign');\n\nvar urlParse = require('url-parse');\n\nvar isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative';\nvar has = Object.prototype.hasOwnProperty;\nvar defaultOptions = {\n  timeout: isReactNative ? 60000 : 120000\n};\n\nmodule.exports = function (opts) {\n  var options = typeof opts === 'string' ? objectAssign({\n    url: opts\n  }, defaultOptions) : objectAssign({}, defaultOptions, opts); // Parse URL into parts\n\n  var url = urlParse(options.url, {}, // Don't use current browser location\n  true // Parse query strings\n  ); // Normalize timeouts\n\n  options.timeout = normalizeTimeout(options.timeout); // Shallow-merge (override) existing query params\n\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query));\n  } // Implicit POST if we have not specified a method but have a body\n\n\n  options.method = options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase(); // Stringify URL\n\n  options.url = url.toString(stringifyQueryString);\n  return options;\n};\n\nfunction stringifyQueryString(obj) {\n  var pairs = [];\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key]);\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : '';\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(function (item) {\n        return push(key, item);\n      });\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='));\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false;\n  }\n\n  if (time.connect || time.socket) {\n    return time;\n  }\n\n  var delay = Number(time);\n\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout);\n  }\n\n  return {\n    connect: delay,\n    socket: delay\n  };\n}\n\nfunction removeUndefined(obj) {\n  var target = {};\n\n  for (var key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key];\n    }\n  }\n\n  return target;\n}","\"use strict\";\n\nvar validUrl = /^https?:\\/\\//i;\n\nmodule.exports = function (options) {\n  if (!validUrl.test(options.url)) {\n    throw new Error(\"\\\"\" + options.url + \"\\\" is not a valid URL\");\n  }\n};","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar objectAssign = require('object-assign');\n\nvar isPlainObject = require('is-plain-object');\n\nvar serializeTypes = ['boolean', 'string', 'number'];\n\nvar isBuffer = function isBuffer(obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);\n};\n\nmodule.exports = function () {\n  return {\n    processOptions: function processOptions(options) {\n      var body = options.body;\n\n      if (!body) {\n        return options;\n      }\n\n      var isStream = typeof body.pipe === 'function';\n      var shouldSerialize = !isStream && !isBuffer(body) && (serializeTypes.indexOf(typeof body === 'undefined' ? 'undefined' : _typeof(body)) !== -1 || Array.isArray(body) || isPlainObject(body));\n\n      if (!shouldSerialize) {\n        return options;\n      }\n\n      return objectAssign({}, options, {\n        body: JSON.stringify(options.body),\n        headers: objectAssign({}, options.headers, {\n          'Content-Type': 'application/json'\n        })\n      });\n    }\n  };\n};","'use strict';\n\nvar objectAssign = require('object-assign');\n\nmodule.exports = function (opts) {\n  return {\n    onResponse: function onResponse(response) {\n      var contentType = response.headers['content-type'] || '';\n      var shouldDecode = opts && opts.force || contentType.indexOf('application/json') !== -1;\n\n      if (!response.body || !contentType || !shouldDecode) {\n        return response;\n      }\n\n      return objectAssign({}, response, {\n        body: tryParse(response.body)\n      });\n    },\n    processOptions: function processOptions(options) {\n      return objectAssign({}, options, {\n        headers: objectAssign({\n          Accept: 'application/json'\n        }, options.headers)\n      });\n    }\n  };\n};\n\nfunction tryParse(body) {\n  try {\n    return JSON.parse(body);\n  } catch (err) {\n    err.message = 'Failed to parsed response body as JSON: ' + err.message;\n    throw err;\n  }\n}","'use strict';\n\nvar global = require('../util/global');\n\nvar objectAssign = require('object-assign');\n\nmodule.exports = function () {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var Observable = opts.implementation || global.Observable;\n\n  if (!Observable) {\n    throw new Error('`Observable` is not available in global scope, and no implementation was passed');\n  }\n\n  return {\n    onReturn: function onReturn(channels, context) {\n      return new Observable(function (observer) {\n        channels.error.subscribe(function (err) {\n          return observer.error(err);\n        });\n        channels.progress.subscribe(function (event) {\n          return observer.next(objectAssign({\n            type: 'progress'\n          }, event));\n        });\n        channels.response.subscribe(function (response) {\n          observer.next(objectAssign({\n            type: 'response'\n          }, response));\n          observer.complete();\n        });\n        channels.request.publish(context);\n        return function () {\n          return channels.abort.publish();\n        };\n      });\n    }\n  };\n};","'use strict';\n\nmodule.exports = function () {\n  return {\n    onRequest: function onRequest(evt) {\n      if (evt.adapter !== 'xhr') {\n        return;\n      }\n\n      var xhr = evt.request;\n      var context = evt.context;\n\n      if ('upload' in xhr && 'onprogress' in xhr.upload) {\n        xhr.upload.onprogress = handleProgress('upload');\n      }\n\n      if ('onprogress' in xhr) {\n        xhr.onprogress = handleProgress('download');\n      }\n\n      function handleProgress(stage) {\n        return function (event) {\n          var percent = event.lengthComputable ? event.loaded / event.total * 100 : -1;\n          context.channels.progress.publish({\n            stage: stage,\n            percent: percent,\n            total: event.total,\n            loaded: event.loaded,\n            lengthComputable: event.lengthComputable\n          });\n        };\n      }\n    }\n  };\n};","'use strict';\n\nmodule.exports = require('./node-progress');","'use strict';\n/* eslint max-depth: [\"error\", 4] */\n\nvar sameOrigin = require('same-origin');\n\nvar parseHeaders = require('parse-headers');\n\nvar noop = function noop() {\n  /* intentional noop */\n};\n\nvar win = window;\nvar XmlHttpRequest = win.XMLHttpRequest || noop;\nvar hasXhr2 = ('withCredentials' in new XmlHttpRequest());\nvar XDomainRequest = hasXhr2 ? XmlHttpRequest : win.XDomainRequest;\nvar adapter = 'xhr';\n\nmodule.exports = function (context, callback) {\n  var opts = context.options;\n  var options = context.applyMiddleware('finalizeOptions', opts);\n  var timers = {}; // Deep-checking window.location because of react native, where `location` doesn't exist\n\n  var cors = win && win.location && !sameOrigin(win.location.href, options.url); // Allow middleware to inject a response, for instance in the case of caching or mocking\n\n  var injectedResponse = context.applyMiddleware('interceptRequest', undefined, {\n    adapter: adapter,\n    context: context\n  }); // If middleware injected a response, treat it as we normally would and return it\n  // Do note that the injected response has to be reduced to a cross-environment friendly response\n\n  if (injectedResponse) {\n    var cbTimer = setTimeout(callback, 0, null, injectedResponse);\n\n    var cancel = function cancel() {\n      return clearTimeout(cbTimer);\n    };\n\n    return {\n      abort: cancel\n    };\n  } // We'll want to null out the request on success/failure\n\n\n  var xhr = cors ? new XDomainRequest() : new XmlHttpRequest();\n  var isXdr = win.XDomainRequest && xhr instanceof win.XDomainRequest;\n  var headers = options.headers; // Request state\n\n  var aborted = false;\n  var loaded = false;\n  var timedOut = false; // Apply event handlers\n\n  xhr.onerror = onError;\n  xhr.ontimeout = onError;\n\n  xhr.onabort = function () {\n    aborted = true;\n  }; // IE9 must have onprogress be set to a unique function\n\n\n  xhr.onprogress = function () {\n    /* intentional noop */\n  };\n\n  var loadEvent = isXdr ? 'onload' : 'onreadystatechange';\n\n  xhr[loadEvent] = function () {\n    // Prevent request from timing out\n    resetTimers();\n\n    if (aborted || xhr.readyState !== 4 && !isXdr) {\n      return;\n    } // Will be handled by onError\n\n\n    if (xhr.status === 0) {\n      return;\n    }\n\n    onLoad();\n  }; // @todo two last options to open() is username/password\n\n\n  xhr.open(options.method, options.url, true // Always async\n  ); // Some options need to be applied after open\n\n  xhr.withCredentials = !!options.withCredentials; // Set headers\n\n  if (headers && xhr.setRequestHeader) {\n    for (var key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key]);\n      }\n    }\n  } else if (headers && isXdr) {\n    throw new Error('Headers cannot be set on an XDomainRequest object');\n  }\n\n  if (options.rawBody) {\n    xhr.responseType = 'arraybuffer';\n  } // Let middleware know we're about to do a request\n\n\n  context.applyMiddleware('onRequest', {\n    options: options,\n    adapter: adapter,\n    request: xhr,\n    context: context\n  });\n  xhr.send(options.body || null); // Figure out which timeouts to use (if any)\n\n  var delays = options.timeout;\n\n  if (delays) {\n    timers.connect = setTimeout(function () {\n      return timeoutRequest('ETIMEDOUT');\n    }, delays.connect);\n  }\n\n  return {\n    abort: abort\n  };\n\n  function abort() {\n    aborted = true;\n\n    if (xhr) {\n      xhr.abort();\n    }\n  }\n\n  function timeoutRequest(code) {\n    timedOut = true;\n    xhr.abort();\n    var error = new Error(code === 'ESOCKETTIMEDOUT' ? 'Socket timed out on request to ' + options.url : 'Connection timed out on request to ' + options.url);\n    error.code = code;\n    context.channels.error.publish(error);\n  }\n\n  function resetTimers() {\n    if (!delays) {\n      return;\n    }\n\n    stopTimers();\n    timers.socket = setTimeout(function () {\n      return timeoutRequest('ESOCKETTIMEDOUT');\n    }, delays.socket);\n  }\n\n  function stopTimers() {\n    // Only clear the connect timeout if we've got a connection\n    if (aborted || xhr.readyState >= 2 && timers.connect) {\n      clearTimeout(timers.connect);\n    }\n\n    if (timers.socket) {\n      clearTimeout(timers.socket);\n    }\n  }\n\n  function onError() {\n    if (loaded) {\n      return;\n    } // Clean up\n\n\n    stopTimers();\n    loaded = true;\n    xhr = null; // Annoyingly, details are extremely scarce and hidden from us.\n    // We only really know that it is a network error\n\n    var err = new Error('Network error while attempting to reach ' + options.url);\n    err.isNetworkError = true;\n    err.request = options;\n    callback(err);\n  }\n\n  function reduceResponse() {\n    var statusCode = xhr.status;\n    var statusMessage = xhr.statusText;\n\n    if (isXdr && statusCode === undefined) {\n      // IE8 CORS GET successful response doesn't have a status field, but body is fine\n      statusCode = 200;\n    } else if (statusCode > 12000 && statusCode < 12156) {\n      // Yet another IE quirk where it emits weird status codes on network errors\n      // https://support.microsoft.com/en-us/kb/193625\n      return onError();\n    } else {\n      // Another IE bug where HTTP 204 somehow ends up as 1223\n      statusCode = xhr.status === 1223 ? 204 : xhr.status;\n      statusMessage = xhr.status === 1223 ? 'No Content' : statusMessage;\n    }\n\n    return {\n      body: xhr.response || xhr.responseText,\n      url: options.url,\n      method: options.method,\n      headers: isXdr ? {} : parseHeaders(xhr.getAllResponseHeaders()),\n      statusCode: statusCode,\n      statusMessage: statusMessage\n    };\n  }\n\n  function onLoad() {\n    if (aborted || loaded || timedOut) {\n      return;\n    }\n\n    if (xhr.status === 0) {\n      onError(new Error('Unknown XHR error'));\n      return;\n    } // Prevent being called twice\n\n\n    stopTimers();\n    loaded = true;\n    callback(null, reduceResponse());\n  }\n};","'use strict';\n\nmodule.exports = require('./node-request');","'use strict';\n/* eslint-disable no-negated-condition */\n\nif (typeof window !== 'undefined') {\n  module.exports = window;\n} else if (typeof global !== 'undefined') {\n  module.exports = global;\n} else if (typeof self !== 'undefined') {\n  module.exports = self;\n} else {\n  module.exports = {};\n}","'use strict';\n\nmodule.exports = function (middleware) {\n  var applyMiddleware = function applyMiddleware(hook, defaultValue) {\n    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    var bailEarly = hook === 'onError';\n    var value = defaultValue;\n\n    for (var i = 0; i < middleware[hook].length; i++) {\n      var handler = middleware[hook][i];\n      value = handler.apply(undefined, [value].concat(args));\n\n      if (bailEarly && !value) {\n        break;\n      }\n    }\n\n    return value;\n  };\n\n  return applyMiddleware;\n};","'use strict';\n\nmodule.exports = function (x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n};","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor, prot;\n  if (isObjectObject(o) === false) return false; // If has modified constructor\n\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false; // If has modified prototype\n\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false; // If constructor does not have an Object-specific method\n\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  } // Most likely a plain Object\n\n\n  return true;\n};","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};","// ISC @ Julien Fontanet\n\"use strict\"; // ===================================================================\n\nvar construct = typeof Reflect !== \"undefined\" ? Reflect.construct : undefined;\nvar defineProperty = Object.defineProperty; // -------------------------------------------------------------------\n\nvar captureStackTrace = Error.captureStackTrace;\n\nif (captureStackTrace === undefined) {\n  captureStackTrace = function captureStackTrace(error) {\n    var container = new Error();\n    defineProperty(error, \"stack\", {\n      configurable: true,\n      get: function getStack() {\n        var stack = container.stack; // Replace property with value for faster future accesses.\n\n        defineProperty(this, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true\n        });\n        return stack;\n      },\n      set: function setStack(stack) {\n        defineProperty(error, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true\n        });\n      }\n    });\n  };\n} // -------------------------------------------------------------------\n\n\nfunction BaseError(message) {\n  if (message !== undefined) {\n    defineProperty(this, \"message\", {\n      configurable: true,\n      value: message,\n      writable: true\n    });\n  }\n\n  var cname = this.constructor.name;\n\n  if (cname !== undefined && cname !== this.name) {\n    defineProperty(this, \"name\", {\n      configurable: true,\n      value: cname,\n      writable: true\n    });\n  }\n\n  captureStackTrace(this, this.constructor);\n}\n\nBaseError.prototype = Object.create(Error.prototype, {\n  // See: https://github.com/JsCommunity/make-error/issues/4\n  constructor: {\n    configurable: true,\n    value: BaseError,\n    writable: true\n  }\n}); // -------------------------------------------------------------------\n// Sets the name of a function if possible (depends of the JS engine).\n\nvar setFunctionName = function () {\n  function setFunctionName(fn, name) {\n    return defineProperty(fn, \"name\", {\n      configurable: true,\n      value: name\n    });\n  }\n\n  try {\n    var f = function f() {};\n\n    setFunctionName(f, \"foo\");\n\n    if (f.name === \"foo\") {\n      return setFunctionName;\n    }\n  } catch (_) {}\n}(); // -------------------------------------------------------------------\n\n\nfunction makeError(constructor, super_) {\n  if (super_ == null || super_ === Error) {\n    super_ = BaseError;\n  } else if (typeof super_ !== \"function\") {\n    throw new TypeError(\"super_ should be a function\");\n  }\n\n  var name;\n\n  if (typeof constructor === \"string\") {\n    name = constructor;\n    constructor = construct !== undefined ? function () {\n      return construct(super_, arguments, this.constructor);\n    } : function () {\n      super_.apply(this, arguments);\n    }; // If the name can be set, do it once and for all.\n\n    if (setFunctionName !== undefined) {\n      setFunctionName(constructor, name);\n      name = undefined;\n    }\n  } else if (typeof constructor !== \"function\") {\n    throw new TypeError(\"constructor should be either a string or a function\");\n  } // Also register the super constructor also as `constructor.super_` just\n  // like Node's `util.inherits()`.\n  //\n  // eslint-disable-next-line dot-notation\n\n\n  constructor.super_ = constructor[\"super\"] = super_;\n  var properties = {\n    constructor: {\n      configurable: true,\n      value: constructor,\n      writable: true\n    }\n  }; // If the name could not be set on the constructor, set it on the\n  // prototype.\n\n  if (name !== undefined) {\n    properties.name = {\n      configurable: true,\n      value: name,\n      writable: true\n    };\n  }\n\n  constructor.prototype = Object.create(super_.prototype, properties);\n  return constructor;\n}\n\nexports = module.exports = makeError;\nexports.BaseError = BaseError;","module.exports = function Pubsub() {\n  var subscribers = [];\n  return {\n    subscribe: subscribe,\n    publish: publish\n  };\n\n  function subscribe(subscriber) {\n    subscribers.push(subscriber);\n    return function unsubscribe() {\n      var idx = subscribers.indexOf(subscriber);\n\n      if (idx > -1) {\n        subscribers.splice(idx, 1);\n      }\n    };\n  }\n\n  function publish() {\n    for (var i = 0; i < subscribers.length; i++) {\n      subscribers[i].apply(null, arguments);\n    }\n  }\n};","var trim = function trim(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n},\n    isArray = function isArray(arg) {\n  return Object.prototype.toString.call(arg) === '[object Array]';\n};\n\nmodule.exports = function (headers) {\n  if (!headers) return {};\n  var result = {};\n  var headersArr = trim(headers).split('\\n');\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i];\n    var index = row.indexOf(':'),\n        key = trim(row.slice(0, index)).toLowerCase(),\n        value = trim(row.slice(index + 1));\n\n    if (typeof result[key] === 'undefined') {\n      result[key] = value;\n    } else if (isArray(result[key])) {\n      result[key].push(value);\n    } else {\n      result[key] = [result[key], value];\n    }\n  }\n\n  return result;\n};","'use strict';\n\nvar has = Object.prototype.hasOwnProperty,\n    undef;\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\n\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\n\n\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\n\n\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g,\n      result = {},\n      part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1]),\n        value = decode(part[2]); //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\n\n\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n  var pairs = [],\n      value,\n      key; //\n  // Optionally prefix with a '?' if needed\n  //\n\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key]; //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value); //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n\n      if (key === null || value === null) continue;\n      pairs.push(key + '=' + value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n} //\n// Expose the module.\n//\n\n\nexports.stringify = querystringify;\nexports.parse = querystring;","'use strict';\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\n\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n      return port !== 80;\n\n    case 'https':\n    case 'wss':\n      return port !== 443;\n\n    case 'ftp':\n      return port !== 21;\n\n    case 'gopher':\n      return port !== 70;\n\n    case 'file':\n      return false;\n  }\n\n  return port !== 0;\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar canReportError_1 = require(\"./util/canReportError\");\n\nvar toSubscriber_1 = require(\"./util/toSubscriber\");\n\nvar observable_1 = require(\"./symbol/observable\");\n\nvar pipe_1 = require(\"./util/pipe\");\n\nvar config_1 = require(\"./config\");\n\nvar Observable = function () {\n  function Observable(subscribe) {\n    this._isScalar = false;\n\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var operator = this.operator;\n    var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(this.source || config_1.config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n    }\n\n    if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  };\n\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n\n      if (canReportError_1.canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  };\n\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscription;\n      subscription = _this.subscribe(function (value) {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    });\n  };\n\n  Observable.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n    return source && source.subscribe(subscriber);\n  };\n\n  Observable.prototype[observable_1.observable] = function () {\n    return this;\n  };\n\n  Observable.prototype.pipe = function () {\n    var operations = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n\n    if (operations.length === 0) {\n      return this;\n    }\n\n    return pipe_1.pipeFromArray(operations)(this);\n  };\n\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n\n  return Observable;\n}();\n\nexports.Observable = Observable;\n\nfunction getPromiseCtor(promiseCtor) {\n  if (!promiseCtor) {\n    promiseCtor = config_1.config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar config_1 = require(\"./config\");\n\nvar hostReportError_1 = require(\"./util/hostReportError\");\n\nexports.empty = {\n  closed: true,\n  next: function next(value) {},\n  error: function error(err) {\n    if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError_1.hostReportError(err);\n    }\n  },\n  complete: function complete() {}\n};","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar isFunction_1 = require(\"./util/isFunction\");\n\nvar Observer_1 = require(\"./Observer\");\n\nvar Subscription_1 = require(\"./Subscription\");\n\nvar rxSubscriber_1 = require(\"../internal/symbol/rxSubscriber\");\n\nvar config_1 = require(\"./config\");\n\nvar hostReportError_1 = require(\"./util/hostReportError\");\n\nvar Subscriber = function (_super) {\n  __extends(Subscriber, _super);\n\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n\n    switch (arguments.length) {\n      case 0:\n        _this.destination = Observer_1.empty;\n        break;\n\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = Observer_1.empty;\n          break;\n        }\n\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_this);\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_this, destinationOrNext);\n          }\n\n          break;\n        }\n\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n        break;\n    }\n\n    return _this;\n  }\n\n  Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function () {\n    return this;\n  };\n\n  Subscriber.create = function (next, error, complete) {\n    var subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  };\n\n  Subscriber.prototype.next = function (value) {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  };\n\n  Subscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._error(err);\n    }\n  };\n\n  Subscriber.prototype.complete = function () {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._complete();\n    }\n  };\n\n  Subscriber.prototype.unsubscribe = function () {\n    if (this.closed) {\n      return;\n    }\n\n    this.isStopped = true;\n\n    _super.prototype.unsubscribe.call(this);\n  };\n\n  Subscriber.prototype._next = function (value) {\n    this.destination.next(value);\n  };\n\n  Subscriber.prototype._error = function (err) {\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._complete = function () {\n    this.destination.complete();\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._unsubscribeAndRecycle = function () {\n    var _parentOrParents = this._parentOrParents;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  };\n\n  return Subscriber;\n}(Subscription_1.Subscription);\n\nexports.Subscriber = Subscriber;\n\nvar SafeSubscriber = function (_super) {\n  __extends(SafeSubscriber, _super);\n\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this._parentSubscriber = _parentSubscriber;\n    var next;\n    var context = _this;\n\n    if (isFunction_1.isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n\n      if (observerOrNext !== Observer_1.empty) {\n        context = Object.create(observerOrNext);\n\n        if (isFunction_1.isFunction(context.unsubscribe)) {\n          _this.add(context.unsubscribe.bind(context));\n        }\n\n        context.unsubscribe = _this.unsubscribe.bind(_this);\n      }\n    }\n\n    _this._context = context;\n    _this._next = next;\n    _this._error = error;\n    _this._complete = complete;\n    return _this;\n  }\n\n  SafeSubscriber.prototype.next = function (value) {\n    if (!this.isStopped && this._next) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      var useDeprecatedSynchronousErrorHandling = config_1.config.useDeprecatedSynchronousErrorHandling;\n\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n\n        hostReportError_1.hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError_1.hostReportError(err);\n        }\n\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.complete = function () {\n    var _this = this;\n\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (this._complete) {\n        var wrappedComplete = function wrappedComplete() {\n          return _this._complete.call(_this._context);\n        };\n\n        if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n\n      if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError_1.hostReportError(err);\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n    if (!config_1.config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError_1.hostReportError(err);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  SafeSubscriber.prototype._unsubscribe = function () {\n    var _parentSubscriber = this._parentSubscriber;\n    this._context = null;\n    this._parentSubscriber = null;\n\n    _parentSubscriber.unsubscribe();\n  };\n\n  return SafeSubscriber;\n}(Subscriber);\n\nexports.SafeSubscriber = SafeSubscriber;","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar isArray_1 = require(\"./util/isArray\");\n\nvar isObject_1 = require(\"./util/isObject\");\n\nvar isFunction_1 = require(\"./util/isFunction\");\n\nvar UnsubscriptionError_1 = require(\"./util/UnsubscriptionError\");\n\nvar Subscription = function () {\n  function Subscription(unsubscribe) {\n    this.closed = false;\n    this._parentOrParents = null;\n    this._subscriptions = null;\n\n    if (unsubscribe) {\n      this._ctorUnsubscribe = true;\n      this._unsubscribe = unsubscribe;\n    }\n  }\n\n  Subscription.prototype.unsubscribe = function () {\n    var errors;\n\n    if (this.closed) {\n      return;\n    }\n\n    var _a = this,\n        _parentOrParents = _a._parentOrParents,\n        _ctorUnsubscribe = _a._ctorUnsubscribe,\n        _unsubscribe = _a._unsubscribe,\n        _subscriptions = _a._subscriptions;\n\n    this.closed = true;\n    this._parentOrParents = null;\n    this._subscriptions = null;\n\n    if (_parentOrParents instanceof Subscription) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (var index = 0; index < _parentOrParents.length; ++index) {\n        var parent_1 = _parentOrParents[index];\n        parent_1.remove(this);\n      }\n    }\n\n    if (isFunction_1.isFunction(_unsubscribe)) {\n      if (_ctorUnsubscribe) {\n        this._unsubscribe = undefined;\n      }\n\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError_1.UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n\n    if (isArray_1.isArray(_subscriptions)) {\n      var index = -1;\n      var len = _subscriptions.length;\n\n      while (++index < len) {\n        var sub = _subscriptions[index];\n\n        if (isObject_1.isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n\n            if (e instanceof UnsubscriptionError_1.UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n\n    if (errors) {\n      throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n    }\n  };\n\n  Subscription.prototype.add = function (teardown) {\n    var subscription = teardown;\n\n    if (!teardown) {\n      return Subscription.EMPTY;\n    }\n\n    switch (typeof teardown) {\n      case 'function':\n        subscription = new Subscription(teardown);\n\n      case 'object':\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription)) {\n          var tmp = subscription;\n          subscription = new Subscription();\n          subscription._subscriptions = [tmp];\n        }\n\n        break;\n\n      default:\n        {\n          throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n    }\n\n    var _parentOrParents = subscription._parentOrParents;\n\n    if (_parentOrParents === null) {\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription) {\n      if (_parentOrParents === this) {\n        return subscription;\n      }\n\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      _parentOrParents.push(this);\n    } else {\n      return subscription;\n    }\n\n    var subscriptions = this._subscriptions;\n\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n\n    return subscription;\n  };\n\n  Subscription.prototype.remove = function (subscription) {\n    var subscriptions = this._subscriptions;\n\n    if (subscriptions) {\n      var subscriptionIndex = subscriptions.indexOf(subscription);\n\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  };\n\n  Subscription.EMPTY = function (empty) {\n    empty.closed = true;\n    return empty;\n  }(new Subscription());\n\n  return Subscription;\n}();\n\nexports.Subscription = Subscription;\n\nfunction flattenUnsubscriptionErrors(errors) {\n  return errors.reduce(function (errs, err) {\n    return errs.concat(err instanceof UnsubscriptionError_1.UnsubscriptionError ? err.errors : err);\n  }, []);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexports.config = {\n  Promise: undefined,\n\n  set useDeprecatedSynchronousErrorHandling(value) {\n    if (value) {\n      var error = new Error();\n      console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n    } else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n      console.log('RxJS: Back to a better error behavior. Thank you. <3');\n    }\n\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  }\n\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Observable_1 = require(\"../Observable\");\n\nexports.EMPTY = new Observable_1.Observable(function (subscriber) {\n  return subscriber.complete();\n});\n\nfunction empty(scheduler) {\n  return scheduler ? emptyScheduled(scheduler) : exports.EMPTY;\n}\n\nexports.empty = empty;\n\nfunction emptyScheduled(scheduler) {\n  return new Observable_1.Observable(function (subscriber) {\n    return scheduler.schedule(function () {\n      return subscriber.complete();\n    });\n  });\n}","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nfunction defaultIfEmpty(defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = null;\n  }\n\n  return function (source) {\n    return source.lift(new DefaultIfEmptyOperator(defaultValue));\n  };\n}\n\nexports.defaultIfEmpty = defaultIfEmpty;\n\nvar DefaultIfEmptyOperator = function () {\n  function DefaultIfEmptyOperator(defaultValue) {\n    this.defaultValue = defaultValue;\n  }\n\n  DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n  };\n\n  return DefaultIfEmptyOperator;\n}();\n\nvar DefaultIfEmptySubscriber = function (_super) {\n  __extends(DefaultIfEmptySubscriber, _super);\n\n  function DefaultIfEmptySubscriber(destination, defaultValue) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.defaultValue = defaultValue;\n    _this.isEmpty = true;\n    return _this;\n  }\n\n  DefaultIfEmptySubscriber.prototype._next = function (value) {\n    this.isEmpty = false;\n    this.destination.next(value);\n  };\n\n  DefaultIfEmptySubscriber.prototype._complete = function () {\n    if (this.isEmpty) {\n      this.destination.next(this.defaultValue);\n    }\n\n    this.destination.complete();\n  };\n\n  return DefaultIfEmptySubscriber;\n}(Subscriber_1.Subscriber);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nfunction filter(predicate, thisArg) {\n  return function filterOperatorFunction(source) {\n    return source.lift(new FilterOperator(predicate, thisArg));\n  };\n}\n\nexports.filter = filter;\n\nvar FilterOperator = function () {\n  function FilterOperator(predicate, thisArg) {\n    this.predicate = predicate;\n    this.thisArg = thisArg;\n  }\n\n  FilterOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n  };\n\n  return FilterOperator;\n}();\n\nvar FilterSubscriber = function (_super) {\n  __extends(FilterSubscriber, _super);\n\n  function FilterSubscriber(destination, predicate, thisArg) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.predicate = predicate;\n    _this.thisArg = thisArg;\n    _this.count = 0;\n    return _this;\n  }\n\n  FilterSubscriber.prototype._next = function (value) {\n    var result;\n\n    try {\n      result = this.predicate.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n\n    if (result) {\n      this.destination.next(value);\n    }\n  };\n\n  return FilterSubscriber;\n}(Subscriber_1.Subscriber);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nfunction map(project, thisArg) {\n  return function mapOperation(source) {\n    if (typeof project !== 'function') {\n      throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n\n    return source.lift(new MapOperator(project, thisArg));\n  };\n}\n\nexports.map = map;\n\nvar MapOperator = function () {\n  function MapOperator(project, thisArg) {\n    this.project = project;\n    this.thisArg = thisArg;\n  }\n\n  MapOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n  };\n\n  return MapOperator;\n}();\n\nexports.MapOperator = MapOperator;\n\nvar MapSubscriber = function (_super) {\n  __extends(MapSubscriber, _super);\n\n  function MapSubscriber(destination, project, thisArg) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.project = project;\n    _this.count = 0;\n    _this.thisArg = thisArg || _this;\n    return _this;\n  }\n\n  MapSubscriber.prototype._next = function (value) {\n    var result;\n\n    try {\n      result = this.project.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n\n    this.destination.next(result);\n  };\n\n  return MapSubscriber;\n}(Subscriber_1.Subscriber);","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar scan_1 = require(\"./scan\");\n\nvar takeLast_1 = require(\"./takeLast\");\n\nvar defaultIfEmpty_1 = require(\"./defaultIfEmpty\");\n\nvar pipe_1 = require(\"../util/pipe\");\n\nfunction reduce(accumulator, seed) {\n  if (arguments.length >= 2) {\n    return function reduceOperatorFunctionWithSeed(source) {\n      return pipe_1.pipe(scan_1.scan(accumulator, seed), takeLast_1.takeLast(1), defaultIfEmpty_1.defaultIfEmpty(seed))(source);\n    };\n  }\n\n  return function reduceOperatorFunction(source) {\n    return pipe_1.pipe(scan_1.scan(function (acc, value, index) {\n      return accumulator(acc, value, index + 1);\n    }), takeLast_1.takeLast(1))(source);\n  };\n}\n\nexports.reduce = reduce;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nfunction scan(accumulator, seed) {\n  var hasSeed = false;\n\n  if (arguments.length >= 2) {\n    hasSeed = true;\n  }\n\n  return function scanOperatorFunction(source) {\n    return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n  };\n}\n\nexports.scan = scan;\n\nvar ScanOperator = function () {\n  function ScanOperator(accumulator, seed, hasSeed) {\n    if (hasSeed === void 0) {\n      hasSeed = false;\n    }\n\n    this.accumulator = accumulator;\n    this.seed = seed;\n    this.hasSeed = hasSeed;\n  }\n\n  ScanOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n  };\n\n  return ScanOperator;\n}();\n\nvar ScanSubscriber = function (_super) {\n  __extends(ScanSubscriber, _super);\n\n  function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.accumulator = accumulator;\n    _this._seed = _seed;\n    _this.hasSeed = hasSeed;\n    _this.index = 0;\n    return _this;\n  }\n\n  Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n    get: function get() {\n      return this._seed;\n    },\n    set: function set(value) {\n      this.hasSeed = true;\n      this._seed = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ScanSubscriber.prototype._next = function (value) {\n    if (!this.hasSeed) {\n      this.seed = value;\n      this.destination.next(value);\n    } else {\n      return this._tryNext(value);\n    }\n  };\n\n  ScanSubscriber.prototype._tryNext = function (value) {\n    var index = this.index++;\n    var result;\n\n    try {\n      result = this.accumulator(this.seed, value, index);\n    } catch (err) {\n      this.destination.error(err);\n    }\n\n    this.seed = result;\n    this.destination.next(result);\n  };\n\n  return ScanSubscriber;\n}(Subscriber_1.Subscriber);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nvar ArgumentOutOfRangeError_1 = require(\"../util/ArgumentOutOfRangeError\");\n\nvar empty_1 = require(\"../observable/empty\");\n\nfunction takeLast(count) {\n  return function takeLastOperatorFunction(source) {\n    if (count === 0) {\n      return empty_1.empty();\n    } else {\n      return source.lift(new TakeLastOperator(count));\n    }\n  };\n}\n\nexports.takeLast = takeLast;\n\nvar TakeLastOperator = function () {\n  function TakeLastOperator(total) {\n    this.total = total;\n\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError();\n    }\n  }\n\n  TakeLastOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n  };\n\n  return TakeLastOperator;\n}();\n\nvar TakeLastSubscriber = function (_super) {\n  __extends(TakeLastSubscriber, _super);\n\n  function TakeLastSubscriber(destination, total) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.total = total;\n    _this.ring = new Array();\n    _this.count = 0;\n    return _this;\n  }\n\n  TakeLastSubscriber.prototype._next = function (value) {\n    var ring = this.ring;\n    var total = this.total;\n    var count = this.count++;\n\n    if (ring.length < total) {\n      ring.push(value);\n    } else {\n      var index = count % total;\n      ring[index] = value;\n    }\n  };\n\n  TakeLastSubscriber.prototype._complete = function () {\n    var destination = this.destination;\n    var count = this.count;\n\n    if (count > 0) {\n      var total = this.count >= this.total ? this.total : this.count;\n      var ring = this.ring;\n\n      for (var i = 0; i < total; i++) {\n        var idx = count++ % total;\n        destination.next(ring[idx]);\n      }\n    }\n\n    destination.complete();\n  };\n\n  return TakeLastSubscriber;\n}(Subscriber_1.Subscriber);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.observable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.rxSubscriber = function () {\n  return typeof Symbol === 'function' ? Symbol('rxSubscriber') : '@@rxSubscriber_' + Math.random();\n}();\n\nexports.$$rxSubscriber = exports.rxSubscriber;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ArgumentOutOfRangeErrorImpl = function () {\n  function ArgumentOutOfRangeErrorImpl() {\n    Error.call(this);\n    this.message = 'argument out of range';\n    this.name = 'ArgumentOutOfRangeError';\n    return this;\n  }\n\n  ArgumentOutOfRangeErrorImpl.prototype = Object.create(Error.prototype);\n  return ArgumentOutOfRangeErrorImpl;\n}();\n\nexports.ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar UnsubscriptionErrorImpl = function () {\n  function UnsubscriptionErrorImpl(errors) {\n    Error.call(this);\n    this.message = errors ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) {\n      return i + 1 + \") \" + err.toString();\n    }).join('\\n  ') : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n  }\n\n  UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n  return UnsubscriptionErrorImpl;\n}();\n\nexports.UnsubscriptionError = UnsubscriptionErrorImpl;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nfunction canReportError(observer) {\n  while (observer) {\n    var _a = observer,\n        closed_1 = _a.closed,\n        destination = _a.destination,\n        isStopped = _a.isStopped;\n\n    if (closed_1 || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber_1.Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n\n  return true;\n}\n\nexports.canReportError = canReportError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction hostReportError(err) {\n  setTimeout(function () {\n    throw err;\n  }, 0);\n}\n\nexports.hostReportError = hostReportError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction identity(x) {\n  return x;\n}\n\nexports.identity = identity;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.isArray = function () {\n  return Array.isArray || function (x) {\n    return x && typeof x.length === 'number';\n  };\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nexports.isFunction = isFunction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction isObject(x) {\n  return x !== null && typeof x === 'object';\n}\n\nexports.isObject = isObject;","\"use strict\";\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar identity_1 = require(\"./identity\");\n\nfunction pipe() {\n  var fns = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    fns[_i] = arguments[_i];\n  }\n\n  return pipeFromArray(fns);\n}\n\nexports.pipe = pipe;\n\nfunction pipeFromArray(fns) {\n  if (fns.length === 0) {\n    return identity_1.identity;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input) {\n    return fns.reduce(function (prev, fn) {\n      return fn(prev);\n    }, input);\n  };\n}\n\nexports.pipeFromArray = pipeFromArray;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nvar rxSubscriber_1 = require(\"../symbol/rxSubscriber\");\n\nvar Observer_1 = require(\"../Observer\");\n\nfunction toSubscriber(nextOrObserver, error, complete) {\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n      return nextOrObserver;\n    }\n\n    if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {\n      return nextOrObserver[rxSubscriber_1.rxSubscriber]();\n    }\n  }\n\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber_1.Subscriber(Observer_1.empty);\n  }\n\n  return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\n\nexports.toSubscriber = toSubscriber;","'use strict';\n\nvar url = require('url');\n\nmodule.exports = function (uri1, uri2, ieMode) {\n  if (uri1 === uri2) {\n    return true;\n  }\n\n  var url1 = url.parse(uri1, false, true);\n  var url2 = url.parse(uri2, false, true);\n  var url1Port = url1.port | 0 || (url1.protocol === 'https' ? 443 : 80);\n  var url2Port = url2.port | 0 || (url2.protocol === 'https' ? 443 : 80);\n  var match = {\n    proto: url1.protocol === url2.protocol,\n    hostname: url1.hostname === url2.hostname,\n    port: url1Port === url2Port\n  };\n  return match.proto && match.hostname && (match.port || ieMode);\n};","/**\n * This file is only used for the browser version of `same-origin`.\n * Used to bring down the size of the browser bundle.\n */\n'use strict';\n\nvar regex = /^(?:(?:(?:([^:\\/#\\?]+:)?(?:(?:\\/\\/)((?:((?:[^:@\\/#\\?]+)(?:\\:(?:[^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((?:\\/?(?:[^\\/\\?#]+\\/+)*)(?:[^\\?#]*)))?(\\?[^#]+)?)(#.*)?/;\nmodule.exports = {\n  regex: regex,\n  parse: function parse(url) {\n    var match = regex.exec(url);\n\n    if (!match) {\n      return {};\n    }\n\n    return {\n      protocol: (match[1] || '').toLowerCase() || undefined,\n      hostname: (match[5] || '').toLowerCase() || undefined,\n      port: match[6] || undefined\n    };\n  }\n};","'use strict';\n\nrequire(\"core-js/modules/es.string.trim-start.js\");\n\nvar required = require('requires-port'),\n    qs = require('querystringify'),\n    slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//,\n    protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i,\n    whitespace = \"[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]\",\n    left = new RegExp('^' + whitespace + '+');\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\n\n\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\n\n\nvar rules = [['#', 'hash'], // Extract from the back.\n['?', 'query'], // Extract from the back.\nfunction sanitize(address) {\n  // Sanitize what is left of the address\n  return address.replace('\\\\', '/');\n}, ['/', 'pathname'], // Extract from the back.\n['@', 'auth', 1], // Extract from the front.\n[NaN, 'host', undefined, 1, 1], // Set left over value.\n[/:(\\d+)$/, 'port', undefined, 1], // RegExp the back.\n[NaN, 'hostname', undefined, 1, 1] // Set left over.\n];\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\n\nvar ignore = {\n  hash: 1,\n  query: 1\n};\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\n\nfunction lolcation(loc) {\n  var globalVar;\n  if (typeof window !== 'undefined') globalVar = window;else if (typeof global !== 'undefined') globalVar = global;else if (typeof self !== 'undefined') globalVar = self;else globalVar = {};\n  var location = globalVar.location || {};\n  loc = loc || location;\n  var finaldestination = {},\n      type = typeof loc,\n      key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n\n    for (key in ignore) {\n      delete finaldestination[key];\n    }\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\n\n\nfunction extractProtocol(address) {\n  address = trimLeft(address);\n  var match = protocolre.exec(address);\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3]\n  };\n}\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\n\n\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/')),\n      i = path.length,\n      last = path[i - 1],\n      unshift = false,\n      up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n  return path.join('/');\n}\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\n\n\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative,\n      extracted,\n      parse,\n      instruction,\n      index,\n      key,\n      instructions = rules.slice(),\n      type = typeof location,\n      url = this,\n      i = 0; //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n  location = lolcation(location); //\n  // Extract protocol information before running the instructions.\n  //\n\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest; //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if (index = parse.exec(address)) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (relative && instruction[3] ? location[key] || '' : ''); //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  } //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n\n\n  if (parser) url.query = parser(url.query); //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n\n  if (relative && location.slashes && url.pathname.charAt(0) !== '/' && (url.pathname !== '' || location.pathname !== '')) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  } //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n\n\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  } //\n  // Parse down the `auth` for the username and password.\n  //\n\n\n  url.username = url.password = '';\n\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:' ? url.protocol + '//' + url.host : 'null'; //\n  // The href is just the compiled result.\n  //\n\n  url.href = url.toString();\n}\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\n\n\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname + ':' + value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n      if (url.port) value += ':' + url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:' ? url.protocol + '//' + url.host : 'null';\n  url.href = url.toString();\n  return url;\n}\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\n\n\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n  var query,\n      url = this,\n      protocol = url.protocol;\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':' + url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?' + query : query;\n  if (url.hash) result += url.hash;\n  return result;\n}\n\nUrl.prototype = {\n  set: set,\n  toString: toString\n}; //\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\n\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\nmodule.exports = Url;"],"sourceRoot":""}